{'text': " Det jeg tenkte å se på da, var å prøve å regne på en regnejobb. Dette er et lite skript som bare står og regner tre millioner ganger, så legger den sammen i lik i pluss 1. En økning med 1, og så legger den sammen og lager en sum. Det er ikke så viktig akkurat hva den gjør, men det som er poenget her, Et sånt program, det vil bruke så mye CPU som det bare kan. Helt inn står det 'bruker CPU'. Den hviler aldri. Bruker helt inn CPU. Og da kan vi se på topp samtidig. Da ser vi toppen her, som står og går. Og hvis jeg nå kjører en... Time tar tiden på regnejobben. Da ser vi at øverste linje her toppsorterer default etter hvilke prosesser som bruker mest CPU. Og øverste linje her, det vil da være regnejobben. Da ser vi ikke... Nei, vi så ikke navnet på regnejobben. Men det er fordi jeg har et lite, litt lite topp. Hvis vi drar litt lenger bort her nå... Sånn. Der kan vi se. Dette er regnejobben som står og kjører. Og den får 100 % CPU. Ved å taste én i topp så kan jeg se hvor mange CPU-er det er. Og da ser jeg denne maskinen her. Dette er egentlig en desktop. Min desktop som står nede på OsloMet. Den har to CPU-er. Iallfall... Senere så har den egentlig fire, eller faktisk åtte, hvis du regner med hypertrening, men jeg har skrudd av de andre CPU-ene. Så i dette tilfellet så ser dette nøyaktig ut som en CPU-ei, en desktop som har to CPU-er. I forelesningshotatene så har jeg et tilsvarende eksempel med den gamle Macen min, som også har to CPU-er. Men i prinsippet så vil det skje... Nøyaktig det samme. For det vi kan prøve å få til her, det er hva skjer om vi nå kjører to regnejobber samtidig. Da kan jeg lage en liten løkke for i-inn 1-2. Og så inn i den løkka så kan jeg ta og time regnejobben. Og så kan jeg legge den i bakgrunnen, sånn at det som vil skje nå, er at to regnejobber startes helt samtidig. Don. Og da ser vi i topp at her er det to regnejobber som starter. Og siden denne serveren har to CPU-er, så ser vi at de jobber på hver sin CPU. Vi så kanskje sist på at det går an å se hvilken CPU som blir brukt. Nå tasses det F i topp, og da ser vi... Vi kan styre hvilke kolonner. Som brukes. Og hvis man blar nedover her, så vil man se... Her er det en kolonne som heter Last Used CPU. Hvis jeg nå taster Space her, så får jeg et merke på den. Og Escape går nå tilbake. Og da vil jeg se... Hvis jeg lager vinduet litt større... Så vil jeg se at ytterst her så kommer det en kolonne som... Det er en statistikk på hvilken CPU ble sist brukt av prosessene som listes. Hvis jeg nå starter regnejobben på nytt, så ser vi at da er det 29.351. Den kjører på CPU1. Og 29.352, den prosessen med den i den. Så kan vi se... Det hender de bytter om. Men stort sett sånn som nå, så kjører de hele tiden på samme SUPU-er. Så kan man spørre seg - hva er det som skjer hvis jeg nå kjører tre SUPU-er? For det som skjedde med to SUPU-er... Kan ta det en gang til eksplosivt. Når jeg har to SUPU-er, så er på en måte ikke dette multitasking. De kjører på to forskjellige zippe-u-er. Så de kjører reelt sett samtidig. Multitasking er når de bytter på på samme zippe-u-er. Så dette er SMP - Simultaneous Multiprocessing. Vi skal gå gjennom de begrepene senere. Men SMP, da kjører man samtidig på to forskjellige enheter. To forskjellige kjerner. Eller core. Så én core er da én regneenhet. Jeg sier ofte CPU, så da mener jeg én ren enhet. Vi kan jo ha mange cours inne på én CPU, men hvis jeg sier CPU uten å spesifisere noe spesielt, så tenker jeg på en core eller en enkelt regneenhet. Og det er det også OS og Topp rapporterer det som. Så da kan vi prøve å kjøre... Skal vi se hvor vi var... Ja, den forløkken. Én, to. Så kan vi prøve å øke den forløkken til tre. Sånn at vi kjører tre prosesser samtidig. Og da ser vi... Da får de plutselig ikke 75 %, men de får noe sånt som 67 %. Her er det i hvert fall én av prosessene som bytter helt inn. For noen ganger kjører begge på én, og andre ganger kjører begge på null. Og den måten å gjøre dette på, det er fair scheduling. Linux-skeduleren, altså den som fordeler hvilke prosesser som kjører hvor, den heter fair scheduler, og den prøver å gi så lik CPU-tid til... Her er det tre stykker som hele tiden vil ha CPU. Da fordeler en det ved at hele tiden kjører en på hver av CPU-ene, men så bytter man på hvilken av de tredje som kjører. Det byttes ganske ofte, noen ganger i sekundet, men ikke hele tiden, for det koster en del å bytte fra én CPU til en annen. På den måten ser vi at alle de prosessene bruker omtrent like lang tid. 25 på den ene og 26,5 på den andre og 26,7 på den tredje. Men sånn røft sett så prøver man å gi like mye CPU til hver. Og sånn kan vi fortsette. Vi kan prøve å se hvordan dette her ser ut på en CPU med... Nei, på en maskin med fire CPU-er. Og det jeg skal gjøre i bakgrunnen da, det er å... Jukse litt. Ved å da skru på noen CPU-er i bakgrunnen. På den Linux-maskinen så kan jeg gjøre det fra kommandolinja. Jeg må riktignok være Ruth, men jeg kan aktivere CPU-er. Så det jeg gjorde i bakgrunnen nå, det var... Jeg skal se på hvordan jeg gjør det senere. Det var å aktivere to til av CPU-ene. At jeg skulle ha fire. Da må jeg gå inn og ut igjen med topp. Hvis jeg taster én nå, så ser vi øverst her... Jeg tastet én, og da får jeg ut at nå har denne serveren her fire sepuer. Hvis jeg nå kjører akkurat samme med tre regnejobber, De tre regnejobbene er i gang, og så får de nå hver sin CPU. Hvis jeg legger inn last used CPU igjen... Så starter vi på nytt, for det var ferdige. Så ser vi at nå så står de på 3, 2 og 1. Vi kan vel også se at de står fast der, stort sett. Den som slutter på 29, står på 3. Ja, 29, den er på 3 fortsatt. 29... Ja. Stort sett, hvis det ikke er noen grunn til det, så blir de stående og kjøre på den sammen. Men da kan vi gjøre tilsvarende. Hva skjer nå om vi kjører fem og kanskje seks sepuer? Nei. Vi kjører seks prosesser på denne maskinen. Har fire CPU-er. Og da ser vi at... Da blir det altså firedel på seks. Det blir to tredjedeler CPU-kapasitet på hver. Og det blir omtrent 67 %. Det varierer litt opp og ned, men sånn ca. 67 %. Og så bytter man hele tiden på prosessene. 25. Så får de noe sånt som... Ja, ca. 80 % burde det bli. Men her ser vi... Ja... Man kan se det varierer litt. Øverst er det alltid én med 98. Men den får liksom en boost. Hvis du ser på totaltiden, så blir den omtrent lik til slutt. Hvis du ser på totaltiden her, så ligger de rundt sånn 21... Litt forskjeller blir det. Men i utgangspunktet så prøver Operativstemme å fordele tiden likt.", 'chunks': [{'timestamp': (0.0, 7.54), 'text': ' Det jeg tenkte å se på da, var å prøve å regne på en regnejobb.'}, {'timestamp': (7.56, 15.28), 'text': ' Dette er et lite skript som bare står og regner'}, {'timestamp': (15.46, 20.3), 'text': ' tre millioner ganger, så legger den sammen i lik i pluss 1.'}, {'timestamp': (20.32, 25.72), 'text': ' En økning med 1, og så legger den sammen og lager en sum.'}, {'timestamp': (25.78, 29.98), 'text': ' Det er ikke så viktig akkurat hva den gjør, men det som er poenget her,'}, {'timestamp': (30.0, 35.2), 'text': ' Et sånt program, det vil bruke så mye CPU som det bare kan.'}, {'timestamp': (35.2, 41.12), 'text': " Helt inn står det 'bruker CPU'. Den hviler aldri."}, {'timestamp': (41.12, 49.8), 'text': ' Bruker helt inn CPU. Og da kan vi se på topp samtidig.'}, {'timestamp': (49.82, 51.92), 'text': ' Da ser vi toppen her, som står og går. Og hvis jeg nå kjører en...'}, {'timestamp': (60.0, 70.56), 'text': ' Time tar tiden på regnejobben. Da ser vi at øverste linje her'}, {'timestamp': (70.56, 74.72), 'text': ' toppsorterer default etter hvilke prosesser som bruker mest CPU.'}, {'timestamp': (74.74, 78.24), 'text': ' Og øverste linje her, det vil da være regnejobben.'}, {'timestamp': (78.32, 82.2), 'text': ' Da ser vi ikke... Nei, vi så ikke navnet på regnejobben.'}, {'timestamp': (82.3, 87.16), 'text': ' Men det er fordi jeg har et lite, litt lite topp.'}, {'timestamp': (90.0, 95.38), 'text': ' Hvis vi drar litt lenger bort her nå... Sånn.'}, {'timestamp': (95.38, 100.04), 'text': ' Der kan vi se. Dette er regnejobben som står og kjører.'}, {'timestamp': (101.0, 105.96), 'text': ' Og den får 100 % CPU. Ved å taste én i topp så kan jeg se'}, {'timestamp': (106.04, 110.18), 'text': ' hvor mange CPU-er det er. Og da ser jeg denne maskinen her.'}, {'timestamp': (110.18, 115.84), 'text': ' Dette er egentlig en desktop. Min desktop som står nede på OsloMet.'}, {'timestamp': (115.84, 119.92), 'text': ' Den har to CPU-er. Iallfall...'}, {'timestamp': (120.0, 125.44), 'text': ' Senere så har den egentlig fire, eller faktisk åtte,'}, {'timestamp': (125.44, 130.28), 'text': ' hvis du regner med hypertrening, men jeg har skrudd av de andre CPU-ene.'}, {'timestamp': (130.28, 135.4), 'text': ' Så i dette tilfellet så ser dette nøyaktig ut som en CPU-ei,'}, {'timestamp': (135.4, 138.16), 'text': ' en desktop som har to CPU-er.'}, {'timestamp': (138.18, 144.56), 'text': ' I forelesningshotatene så har jeg et tilsvarende eksempel med den gamle Macen min,'}, {'timestamp': (144.64, 149.98), 'text': ' som også har to CPU-er. Men i prinsippet så vil det skje...'}, {'timestamp': (150.0, 154.8), 'text': ' Nøyaktig det samme. For det vi kan prøve å få til her,'}, {'timestamp': (154.88, 160.38), 'text': ' det er hva skjer om vi nå kjører to regnejobber samtidig.'}, {'timestamp': (160.38, 166.8), 'text': ' Da kan jeg lage en liten løkke for i-inn 1-2.'}, {'timestamp': (166.88, 172.24), 'text': ' Og så inn i den løkka så kan jeg ta og time regnejobben.'}, {'timestamp': (172.24, 177.32), 'text': ' Og så kan jeg legge den i bakgrunnen, sånn at det som vil skje nå,'}, {'timestamp': (177.4, 179.86), 'text': ' er at to regnejobber startes helt samtidig.'}, {'timestamp': (180.0, 189.86), 'text': ' Don. Og da ser vi i topp at her er det to regnejobber som starter.'}, {'timestamp': (189.88, 196.0), 'text': ' Og siden denne serveren har to CPU-er, så ser vi'}, {'timestamp': (196.0, 198.76), 'text': ' at de jobber på hver sin CPU.'}, {'timestamp': (198.78, 205.74), 'text': ' Vi så kanskje sist på at det går an å se hvilken CPU som blir brukt.'}, {'timestamp': (205.8, 209.8), 'text': ' Nå tasses det F i topp, og da ser vi... Vi kan styre hvilke kolonner.'}, {'timestamp': (210.0, 216.02), 'text': ' Som brukes. Og hvis man blar nedover her, så vil man se...'}, {'timestamp': (216.02, 220.2), 'text': ' Her er det en kolonne som heter Last Used CPU.'}, {'timestamp': (220.22, 224.52), 'text': ' Hvis jeg nå taster Space her, så får jeg et merke på den.'}, {'timestamp': (224.52, 227.08), 'text': ' Og Escape går nå tilbake.'}, {'timestamp': (227.58, 234.8), 'text': ' Og da vil jeg se... Hvis jeg lager vinduet litt større...'}, {'timestamp': (234.8, 239.92), 'text': ' Så vil jeg se at ytterst her så kommer det en kolonne som...'}, {'timestamp': (240.0, 250.64), 'text': ' Det er en statistikk på hvilken CPU ble sist brukt av prosessene som listes.'}, {'timestamp': (253.6, 261.52), 'text': ' Hvis jeg nå starter regnejobben på nytt, så ser vi at da er det 29.351.'}, {'timestamp': (261.52, 269.8), 'text': ' Den kjører på CPU1. Og 29.352, den prosessen med den i den.'}, {'timestamp': (270.0, 274.08), 'text': ' Så kan vi se... Det hender de bytter om.'}, {'timestamp': (274.16, 280.16), 'text': ' Men stort sett sånn som nå, så kjører de hele tiden på samme SUPU-er.'}, {'timestamp': (280.16, 287.8), 'text': ' Så kan man spørre seg - hva er det som skjer hvis jeg nå kjører tre SUPU-er?'}, {'timestamp': (288.08, 291.76), 'text': ' For det som skjedde med to SUPU-er...'}, {'timestamp': (291.84, 295.68), 'text': ' Kan ta det en gang til eksplosivt.'}, {'timestamp': (295.76, 299.96), 'text': ' Når jeg har to SUPU-er, så er på en måte ikke dette multitasking.'}, {'timestamp': (300.0, 306.28), 'text': ' De kjører på to forskjellige zippe-u-er. Så de kjører reelt sett samtidig.'}, {'timestamp': (306.36, 310.0), 'text': ' Multitasking er når de bytter på på samme zippe-u-er.'}, {'timestamp': (310.0, 318.56), 'text': ' Så dette er SMP - Simultaneous Multiprocessing.'}, {'timestamp': (318.56, 322.04), 'text': ' Vi skal gå gjennom de begrepene senere.'}, {'timestamp': (322.1, 329.6), 'text': ' Men SMP, da kjører man samtidig på to forskjellige enheter. To forskjellige kjerner.'}, {'timestamp': (330.0, 337.8), 'text': ' Eller core. Så én core er da én regneenhet. Jeg sier ofte CPU,'}, {'timestamp': (337.92, 344.56), 'text': ' så da mener jeg én ren enhet. Vi kan jo ha mange cours inne på én CPU,'}, {'timestamp': (344.68, 350.68), 'text': ' men hvis jeg sier CPU uten å spesifisere noe spesielt,'}, {'timestamp': (350.8, 355.84), 'text': ' så tenker jeg på en core eller en enkelt regneenhet.'}, {'timestamp': (355.84, 359.96), 'text': ' Og det er det også OS og Topp rapporterer det som.'}, {'timestamp': (360.0, 367.94), 'text': ' Så da kan vi prøve å kjøre... Skal vi se hvor vi var...'}, {'timestamp': (367.96, 372.92), 'text': ' Ja, den forløkken. Én, to. Så kan vi prøve å øke den forløkken til tre.'}, {'timestamp': (373.08, 378.8), 'text': ' Sånn at vi kjører tre prosesser samtidig.'}, {'timestamp': (378.82, 389.1), 'text': ' Og da ser vi... Da får de plutselig ikke 75 %, men de får noe sånt som 67 %.'}, {'timestamp': (390.0, 397.84), 'text': ' Her er det i hvert fall én av prosessene som bytter helt inn.'}, {'timestamp': (397.92, 403.2), 'text': ' For noen ganger kjører begge på én, og andre ganger kjører begge på null.'}, {'timestamp': (403.88, 408.04), 'text': ' Og den måten å gjøre dette på, det er fair scheduling.'}, {'timestamp': (408.06, 414.48), 'text': ' Linux-skeduleren, altså den som fordeler hvilke prosesser som kjører hvor,'}, {'timestamp': (414.56, 419.92), 'text': ' den heter fair scheduler, og den prøver å gi så lik CPU-tid til...'}, {'timestamp': (420.0, 424.08), 'text': ' Her er det tre stykker som hele tiden vil ha CPU.'}, {'timestamp': (424.16, 428.84), 'text': ' Da fordeler en det ved at hele tiden kjører en på hver av CPU-ene,'}, {'timestamp': (429.06, 432.56), 'text': ' men så bytter man på hvilken av de tredje som kjører.'}, {'timestamp': (432.58, 436.6), 'text': ' Det byttes ganske ofte, noen ganger i sekundet, men ikke hele tiden,'}, {'timestamp': (436.6, 441.92), 'text': ' for det koster en del å bytte fra én CPU til en annen.'}, {'timestamp': (442.0, 447.92), 'text': ' På den måten ser vi at alle de prosessene bruker omtrent like lang tid.'}, {'timestamp': (450.0, 455.4), 'text': ' 25 på den ene og 26,5 på den andre og 26,7 på den tredje.'}, {'timestamp': (455.48, 461.12), 'text': ' Men sånn røft sett så prøver man å gi like mye CPU til hver.'}, {'timestamp': (461.12, 467.2), 'text': ' Og sånn kan vi fortsette. Vi kan prøve å se hvordan dette her ser ut'}, {'timestamp': (467.22, 474.96), 'text': ' på en CPU med... Nei, på en maskin med fire CPU-er.'}, {'timestamp': (474.96, 479.96), 'text': ' Og det jeg skal gjøre i bakgrunnen da, det er å...'}, {'timestamp': (480.0, 483.24), 'text': ' Jukse litt.'}, {'timestamp': (483.32, 488.44), 'text': ' Ved å da skru på noen CPU-er i bakgrunnen.'}, {'timestamp': (490.72, 495.28), 'text': ' På den Linux-maskinen så kan jeg gjøre det fra kommandolinja.'}, {'timestamp': (495.4, 500.44), 'text': ' Jeg må riktignok være Ruth, men jeg kan aktivere CPU-er.'}, {'timestamp': (500.44, 504.68), 'text': ' Så det jeg gjorde i bakgrunnen nå, det var...'}, {'timestamp': (504.8, 509.92), 'text': ' Jeg skal se på hvordan jeg gjør det senere. Det var å aktivere to til av CPU-ene.'}, {'timestamp': (510.0, 516.62), 'text': ' At jeg skulle ha fire. Da må jeg gå inn og ut igjen med topp.'}, {'timestamp': (516.62, 521.2), 'text': ' Hvis jeg taster én nå, så ser vi øverst her...'}, {'timestamp': (521.2, 526.36), 'text': ' Jeg tastet én, og da får jeg ut at nå har denne serveren her'}, {'timestamp': (526.8, 535.92), 'text': ' fire sepuer. Hvis jeg nå kjører akkurat samme med tre regnejobber,'}, {'timestamp': (540.0, 546.7), 'text': ' De tre regnejobbene er i gang, og så får de nå hver sin CPU.'}, {'timestamp': (546.72, 553.52), 'text': ' Hvis jeg legger inn last used CPU igjen...'}, {'timestamp': (555.36, 559.64), 'text': ' Så starter vi på nytt, for det var ferdige.'}, {'timestamp': (559.64, 564.28), 'text': ' Så ser vi at nå så står de på 3, 2 og 1.'}, {'timestamp': (564.28, 568.92), 'text': ' Vi kan vel også se at de står fast der, stort sett.'}, {'timestamp': (570.0, 576.08), 'text': ' Den som slutter på 29, står på 3. Ja, 29, den er på 3 fortsatt.'}, {'timestamp': (576.08, 581.08), 'text': ' 29... Ja. Stort sett, hvis det ikke er noen grunn til det,'}, {'timestamp': (581.16, 584.28), 'text': ' så blir de stående og kjøre på den sammen.'}, {'timestamp': (584.28, 589.3), 'text': ' Men da kan vi gjøre tilsvarende. Hva skjer nå om'}, {'timestamp': (589.3, 594.48), 'text': ' vi kjører fem og kanskje seks sepuer? Nei.'}, {'timestamp': (594.48, 598.68), 'text': ' Vi kjører seks prosesser på denne maskinen.'}, {'timestamp': (600.0, 603.52), 'text': ' Har fire CPU-er.'}, {'timestamp': (603.52, 607.92), 'text': ' Og da ser vi at...'}, {'timestamp': (607.92, 611.32), 'text': ' Da blir det altså firedel på seks.'}, {'timestamp': (611.94, 615.48), 'text': ' Det blir to tredjedeler CPU-kapasitet på hver.'}, {'timestamp': (615.48, 619.24), 'text': ' Og det blir omtrent 67 %.'}, {'timestamp': (621.84, 625.48), 'text': ' Det varierer litt opp og ned, men sånn ca. 67 %.'}, {'timestamp': (625.52, 629.0), 'text': ' Og så bytter man hele tiden på prosessene.'}, {'timestamp': (630.0, 635.12), 'text': ' 25. Så får de noe sånt som...'}, {'timestamp': (636.92, 641.92), 'text': ' Ja, ca. 80 % burde det bli. Men her ser vi...'}, {'timestamp': (642.64, 647.72), 'text': ' Ja... Man kan se det varierer litt. Øverst er det alltid én med 98.'}, {'timestamp': (647.8, 652.6), 'text': ' Men den får liksom en boost. Hvis du ser på totaltiden,'}, {'timestamp': (652.68, 659.72), 'text': ' så blir den omtrent lik til slutt. Hvis du ser på totaltiden her, så ligger de rundt sånn 21...'}, {'timestamp': (660.0, 670.04), 'text': ' Litt forskjeller blir det. Men i utgangspunktet så prøver Operativstemme å fordele tiden likt.'}]}