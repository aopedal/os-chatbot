{'text': ' Men hvordan kan OS effektivt kontrollere brukerprosesser? Jo, problemet er at vi kan ikke bare si til en prosess... OK, nå har du full kontroll på denne CPU-en. Gjør hva du vil. For da kan jo... Da får vi et problem hvis den prosessen da bare sier holdt, eller setter opp en løkke og bare står i en evig løkke og står og går. Operativsystemet skal kontrollere hver eneste instruksjon som brukerprosessen utfører. En slags emulering. Så gir det veldig mye system-overhead. Selv om det på en måte er litt det man kan se med virtuelle maskiner. Med virtualisering, sånn som KVM og WMW osv., men også med Java-virtuell maskin. Så finnes det systemer som på en måte kontrollerer alle... Men så igjen, da... For å få det effektivt så ofte så... Til syvende og sist så endrer det seg med at prosessene må få full kontroll på CPU-en. Må kunne gjøre hver institusjon uten et overhedd. F.eks. den fibonaccirekken. Hvis vi skal utføre den prosessen effektivt, Kontrollere hver enkelt institusjon og se at den ikke gjør noe galt i den koden. Så vi må prøve å finne en løsning på det problemet. Ja... Så... En effektiv løsning på dette problemet... Vi har allerede vært litt inne på det i prinsippet, men ikke hvordan det i praksis utføres. Men den effektive løsningen, den går da jo... Det går ut på at man bruker en hardwaretimer. I systemet så er det en hardwaretimer som da gir et begrenset tidsintervall til brukerprosessene. Og i den simuleringen som ligger ute, så bruker jeg en sånn kjøkkenklokke. Og der ringer hardwaretimeren hvert minutt. Så der er den. Men her, når vi snakker om OS-hardwaretimere, så er det typisk et hundredels sekund. Veldig ofte så kommer det et sånt hardwaretimer-tick. Og da er det sånn... Ved hardware så når det kommer et tick fra timeren, så switches det til... Skal vi se... Nå må jeg se for meg det riktige her. Jo, hver gang hardware-timeren slår inn, så kommer operativsystemet inn. Da svisjes det til privilegert modus, eller kurl-mode, og så har kjernen kontrollen. Og så, i starten av... Så sier operativsystemet at nå skal den prosessen få lov å kjøre. Så da switcher operativsystemkjernen til brukmodus. Og så laster den inn den første instruksjonen. Det kan være set ice like 1. Det er typisk førsteinstruksjonen til koden som skal kjøre. Og så får den koden stå og kjøre i et hundredels sekund. Hele hovedpoenget da, uansett hva den prosessen gjør, så vil ikke den kunne ødelegge systemet, for den vil da kjøre i brukermodus, og det er helt ufarlig. Den kan ikke hvis en utfører holdt, så skjer det ingenting. Vi kan gå tilbake og se på den koden her. Tenk deg nå, timeren går på. Operativsystemkjernen. Det switches automatisk over til curlen mode, og første operativsystemkodelinje settes inn. Så operativsystem og kontroll. Det operativsystemet gjør da, er å laste inn alt som er nødvendig for at denne prosessen skal begynne å kjøre. Og så switcher operativsystemet, for når du er i curlen mode, Den er ikke motsatt. Så du er i kernemote, så switcher du til usemote, og så legger du denne instruksjonen inn i instruksjonsregisteret. Og så overlater du full kontroll til denne prosessen. Så løper den prosessen opp og ned, opp og ned, opp og ned her milliarder av ganger, lager kjempemange ledd i firmadachi-rekken, og så går det en timer. Da kommer hardware-timeren inn. Og idet hardware-timen kommer inn, så tar operativsystemet over kontrollen. Og på den måten så kan brukerprosesser kjøre i use-motes og utnytte CPU-en direkte veldig effektivt og så mye de vil, mens hvert hundredel av et sekund så kommer operativsystemet inn og tar over og sier OK, nå er det neste prosess som kjører. Så sånn kan... Apparativsystemet kontrollerer effektivt brukerprosessene på en sikker måte uten at brukerprosessene kan f.eks. skru av helmaskinen. Dette er et minnekart, altså det bildet av ramm på hvordan brukermodus og privilegertmodus, eller corner mode, ser ut på rammenivå. Her øverst har vi den delen av minnet som er tilgjengelig fra brukermodus. Det er typisk av brukerdata og vanlige programmer. Men så er det også noe av operativsystemkjernen. Nei, ikke operativsystemkjernen, men noe av operativsystemet. Altså den delen av operativsystemet som er utenfor kjernen. Det kan være system software som ikke nødvendigvis... som heldigvis trenger å gjøre privilegerte institusjoner. Som ikke trenger det, men som utfører en del jobb akkurat som et vanlig program utfører. Men så har du den privilegerte delen av minnet som utgjør OS-kjernen. Og her kan ikke vanlige brukerprogrammer få aksess her inne. For da kunne de endre på operativstemme. Det vil være en hackers drøm å kunne få tilgang til OS-kjernen. For da kan du virkelig endre planen for alt. Så det må vi gå oss. Og da er det igjen sånn at når modusbytt switcher til brukermodus, Og en prosess prøver å endre på noe i denne adressen her, i RAM, så får den rett og slett ikke lov. Hvis en prosess prøver å endre på noe i RAM som tilhører en annen prosess, så får den heller ikke lov. Så dette ville være styrt. Men den privilegerte delen av mine, den er det helt umulig å touche. Og kontrollerer da operativsystemet, alle prosessene, både CPU og ram, ved hjelp av brukermodus og køllmodus.', 'chunks': [{'timestamp': (0.0, 4.34), 'text': ' Men hvordan kan OS effektivt kontrollere brukerprosesser?'}, {'timestamp': (4.34, 10.96), 'text': ' Jo, problemet er at vi kan ikke bare si til en prosess...'}, {'timestamp': (11.04, 18.36), 'text': ' OK, nå har du full kontroll på denne CPU-en. Gjør hva du vil.'}, {'timestamp': (18.36, 23.96), 'text': ' For da kan jo... Da får vi et problem hvis den prosessen da bare sier holdt,'}, {'timestamp': (23.98, 28.02), 'text': ' eller setter opp en løkke og bare står i en evig løkke og står og går.'}, {'timestamp': (30.0, 33.36), 'text': ' Operativsystemet skal kontrollere hver eneste instruksjon'}, {'timestamp': (33.36, 37.6), 'text': ' som brukerprosessen utfører. En slags emulering.'}, {'timestamp': (37.68, 40.68), 'text': ' Så gir det veldig mye system-overhead.'}, {'timestamp': (40.76, 46.6), 'text': ' Selv om det på en måte er litt det man kan se med virtuelle maskiner.'}, {'timestamp': (46.6, 54.6), 'text': ' Med virtualisering, sånn som KVM og WMW osv., men også med Java-virtuell maskin.'}, {'timestamp': (55.12, 59.8), 'text': ' Så finnes det systemer som på en måte kontrollerer alle...'}, {'timestamp': (60.0, 69.44), 'text': ' Men så igjen, da... For å få det effektivt så ofte så...'}, {'timestamp': (69.44, 75.64), 'text': ' Til syvende og sist så endrer det seg med at prosessene må få full kontroll på CPU-en.'}, {'timestamp': (75.76, 79.52), 'text': ' Må kunne gjøre hver institusjon uten et overhedd.'}, {'timestamp': (79.52, 87.92), 'text': ' F.eks. den fibonaccirekken. Hvis vi skal utføre den prosessen effektivt,'}, {'timestamp': (90.0, 95.4), 'text': ' Kontrollere hver enkelt institusjon og se at den ikke gjør noe galt i den koden.'}, {'timestamp': (95.4, 101.8), 'text': ' Så vi må prøve å finne en løsning på det problemet.'}, {'timestamp': (103.2, 108.84), 'text': ' Ja... Så... En effektiv løsning på dette problemet...'}, {'timestamp': (108.92, 112.92), 'text': ' Vi har allerede vært litt inne på det i prinsippet,'}, {'timestamp': (113.0, 119.0), 'text': ' men ikke hvordan det i praksis utføres. Men den effektive løsningen, den går da jo...'}, {'timestamp': (120.0, 125.08), 'text': ' Det går ut på at man bruker en hardwaretimer.'}, {'timestamp': (125.16, 129.12), 'text': ' I systemet så er det en hardwaretimer'}, {'timestamp': (129.22, 136.08), 'text': ' som da gir et begrenset tidsintervall til brukerprosessene.'}, {'timestamp': (136.68, 143.28), 'text': ' Og i den simuleringen som ligger ute, så bruker jeg en sånn kjøkkenklokke.'}, {'timestamp': (143.36, 149.72), 'text': ' Og der ringer hardwaretimeren hvert minutt. Så der er den.'}, {'timestamp': (150.0, 154.24), 'text': ' Men her, når vi snakker om OS-hardwaretimere,'}, {'timestamp': (154.32, 157.4), 'text': ' så er det typisk et hundredels sekund.'}, {'timestamp': (157.4, 162.08), 'text': ' Veldig ofte så kommer det et sånt hardwaretimer-tick.'}, {'timestamp': (162.08, 166.32), 'text': ' Og da er det sånn...'}, {'timestamp': (166.34, 172.92), 'text': ' Ved hardware så når det kommer et tick fra timeren,'}, {'timestamp': (172.92, 178.68), 'text': ' så switches det til...'}, {'timestamp': (180.0, 187.2), 'text': ' Skal vi se... Nå må jeg se for meg det riktige her.'}, {'timestamp': (190.8, 194.44), 'text': ' Jo, hver gang hardware-timeren slår inn,'}, {'timestamp': (194.44, 197.8), 'text': ' så kommer operativsystemet inn.'}, {'timestamp': (197.88, 204.76), 'text': ' Da svisjes det til privilegert modus, eller kurl-mode,'}, {'timestamp': (204.76, 208.68), 'text': ' og så har kjernen kontrollen. Og så, i starten av...'}, {'timestamp': (210.0, 215.72), 'text': ' Så sier operativsystemet at nå skal den prosessen få lov å kjøre.'}, {'timestamp': (215.72, 223.08), 'text': ' Så da switcher operativsystemkjernen til brukmodus.'}, {'timestamp': (223.16, 225.36), 'text': ' Og så laster den inn den første instruksjonen.'}, {'timestamp': (225.36, 231.0), 'text': ' Det kan være set ice like 1. Det er typisk førsteinstruksjonen til koden som skal kjøre.'}, {'timestamp': (231.0, 239.44), 'text': ' Og så får den koden stå og kjøre i et hundredels sekund.'}, {'timestamp': (240.0, 248.16), 'text': ' Hele hovedpoenget da, uansett hva den prosessen gjør,'}, {'timestamp': (248.24, 251.28), 'text': ' så vil ikke den kunne ødelegge systemet,'}, {'timestamp': (251.36, 255.64), 'text': ' for den vil da kjøre i brukermodus, og det er helt ufarlig.'}, {'timestamp': (255.72, 260.52), 'text': ' Den kan ikke hvis en utfører holdt, så skjer det ingenting.'}, {'timestamp': (260.6, 264.2), 'text': ' Vi kan gå tilbake og se på den koden her.'}, {'timestamp': (264.2, 269.96), 'text': ' Tenk deg nå, timeren går på. Operativsystemkjernen.'}, {'timestamp': (270.0, 275.44), 'text': ' Det switches automatisk over til curlen mode,'}, {'timestamp': (275.84, 280.68), 'text': ' og første operativsystemkodelinje settes inn.'}, {'timestamp': (280.68, 284.36), 'text': ' Så operativsystem og kontroll.'}, {'timestamp': (284.44, 290.4), 'text': ' Det operativsystemet gjør da, er å laste inn alt som er nødvendig'}, {'timestamp': (290.48, 294.56), 'text': ' for at denne prosessen skal begynne å kjøre.'}, {'timestamp': (294.56, 299.72), 'text': ' Og så switcher operativsystemet, for når du er i curlen mode,'}, {'timestamp': (300.0, 303.68), 'text': ' Den er ikke motsatt. Så du er i kernemote,'}, {'timestamp': (303.76, 307.44), 'text': ' så switcher du til usemote, og så legger du'}, {'timestamp': (307.44, 312.76), 'text': ' denne instruksjonen inn i instruksjonsregisteret.'}, {'timestamp': (312.84, 316.56), 'text': ' Og så overlater du full kontroll til denne prosessen.'}, {'timestamp': (316.56, 320.12), 'text': ' Så løper den prosessen opp og ned, opp og ned, opp og ned her'}, {'timestamp': (320.12, 324.64), 'text': ' milliarder av ganger, lager kjempemange ledd i firmadachi-rekken,'}, {'timestamp': (324.64, 329.92), 'text': ' og så går det en timer. Da kommer hardware-timeren inn.'}, {'timestamp': (330.0, 338.26), 'text': ' Og idet hardware-timen kommer inn, så tar operativsystemet over kontrollen.'}, {'timestamp': (338.28, 343.2), 'text': ' Og på den måten så kan brukerprosesser kjøre i use-motes'}, {'timestamp': (343.28, 347.28), 'text': ' og utnytte CPU-en direkte veldig effektivt og så mye de vil,'}, {'timestamp': (347.3, 352.68), 'text': ' mens hvert hundredel av et sekund så kommer operativsystemet inn og tar over'}, {'timestamp': (352.76, 357.96), 'text': ' og sier OK, nå er det neste prosess som kjører. Så sånn kan...'}, {'timestamp': (360.0, 364.5), 'text': ' Apparativsystemet kontrollerer effektivt brukerprosessene på en sikker måte'}, {'timestamp': (364.58, 370.3), 'text': ' uten at brukerprosessene kan f.eks. skru av helmaskinen.'}, {'timestamp': (372.64, 378.62), 'text': ' Dette er et minnekart, altså det bildet av ramm på hvordan'}, {'timestamp': (378.62, 386.7), 'text': ' brukermodus og privilegertmodus, eller corner mode, ser ut på rammenivå.'}, {'timestamp': (390.0, 397.54), 'text': ' Her øverst har vi den delen av minnet som er tilgjengelig fra brukermodus.'}, {'timestamp': (397.56, 402.6), 'text': ' Det er typisk av brukerdata og vanlige programmer.'}, {'timestamp': (402.62, 406.62), 'text': ' Men så er det også noe av operativsystemkjernen.'}, {'timestamp': (406.64, 411.08), 'text': ' Nei, ikke operativsystemkjernen, men noe av operativsystemet.'}, {'timestamp': (411.1, 415.7), 'text': ' Altså den delen av operativsystemet som er utenfor kjernen.'}, {'timestamp': (415.78, 419.7), 'text': ' Det kan være system software som ikke nødvendigvis...'}, {'timestamp': (420.0, 425.04), 'text': ' som heldigvis trenger å gjøre privilegerte institusjoner.'}, {'timestamp': (425.04, 430.04), 'text': ' Som ikke trenger det, men som utfører en del jobb'}, {'timestamp': (430.04, 434.12), 'text': ' akkurat som et vanlig program utfører.'}, {'timestamp': (434.2, 439.72), 'text': ' Men så har du den privilegerte delen av minnet som utgjør OS-kjernen.'}, {'timestamp': (439.76, 446.4), 'text': ' Og her kan ikke vanlige brukerprogrammer få aksess her inne.'}, {'timestamp': (447.36, 449.96), 'text': ' For da kunne de endre på operativstemme.'}, {'timestamp': (450.02, 459.82), 'text': ' Det vil være en hackers drøm å kunne få tilgang til OS-kjernen.'}, {'timestamp': (459.82, 466.98), 'text': ' For da kan du virkelig endre planen for alt. Så det må vi gå oss.'}, {'timestamp': (469.02, 478.94), 'text': ' Og da er det igjen sånn at når modusbytt switcher til brukermodus,'}, {'timestamp': (480.0, 486.8), 'text': ' Og en prosess prøver å endre på noe i denne adressen her, i RAM,'}, {'timestamp': (486.8, 489.68), 'text': ' så får den rett og slett ikke lov.'}, {'timestamp': (489.8, 495.44), 'text': ' Hvis en prosess prøver å endre på noe i RAM'}, {'timestamp': (496.5, 500.0), 'text': ' som tilhører en annen prosess, så får den heller ikke lov.'}, {'timestamp': (500.08, 502.76), 'text': ' Så dette ville være styrt.'}, {'timestamp': (502.84, 508.84), 'text': ' Men den privilegerte delen av mine, den er det helt umulig å touche.'}, {'timestamp': (510.0, 516.16), 'text': ' Og kontrollerer da operativsystemet, alle prosessene, både CPU og ram,'}, {'timestamp': (516.24, 521.0), 'text': ' ved hjelp av brukermodus og køllmodus.'}]}