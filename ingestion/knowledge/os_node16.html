<!DOCTYPE HTML>

<!--Converted with LaTeX2HTML 2021 (Released January 1, 2021) -->
<HTML lang="en">
<HEAD>
<TITLE>15 Forelesning 23/4-24. Disker og filsystemer</TITLE>
<META NAME="description" CONTENT="15 Forelesning 23/4-24. Disker og filsystemer">
<META NAME="keywords" CONTENT="os">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="viewport" CONTENT="width=device-width, initial-scale=1.0">
<META NAME="Generator" CONTENT="LaTeX2HTML v2021">

<LINK REL="STYLESHEET" HREF="../../../os.css">

</HEAD>

<BODY  bgcolor="#ffffff">
<!--Table of Child-Links-->
<A ID="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A ID="tex2html1150"
  HREF="node16.html#SECTION000161000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">1</SPAN> Forelesningsvideoer</A>
<LI><A ID="tex2html1151"
  HREF="node16.html#SECTION000162000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">2</SPAN> Disker</A>
<UL>
<LI><A ID="tex2html1152"
  HREF="node16.html#SECTION000162100000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">1</SPAN> Sektor</A>
<LI><A ID="tex2html1153"
  HREF="node16.html#SECTION000162200000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">2</SPAN> Sylinder</A>
</UL>
<BR>
<LI><A ID="tex2html1154"
  HREF="node16.html#SECTION000163000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">3</SPAN> Partisjoner</A>
<LI><A ID="tex2html1155"
  HREF="node16.html#SECTION000164000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">4</SPAN> SSD (Solid State Drive)</A>
<LI><A ID="tex2html1156"
  HREF="node16.html#SECTION000165000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">5</SPAN> Filsystemer</A>
<UL>
<LI><A ID="tex2html1157"
  HREF="node16.html#SECTION000165100000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">5</SPAN>.<SPAN CLASS="arabic">1</SPAN> Tabell over filenes blokker</A>
<LI><A ID="tex2html1158"
  HREF="node16.html#SECTION000165200000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">5</SPAN>.<SPAN CLASS="arabic">2</SPAN> Fragmentering</A>
<LI><A ID="tex2html1159"
  HREF="node16.html#SECTION000165300000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">5</SPAN>.<SPAN CLASS="arabic">3</SPAN> Sletting av filer</A>
</UL>
<BR>
<LI><A ID="tex2html1160"
  HREF="node16.html#SECTION000166000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">6</SPAN> Lage et Linux ext3 filsystem</A>
<LI><A ID="tex2html1161"
  HREF="node16.html#SECTION000167000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">7</SPAN> NTFS</A>
<UL>
<LI><A ID="tex2html1162"
  HREF="node16.html#SECTION000167100000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">7</SPAN>.<SPAN CLASS="arabic">1</SPAN> Volum</A>
<LI><A ID="tex2html1163"
  HREF="node16.html#SECTION000167200000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">7</SPAN>.<SPAN CLASS="arabic">2</SPAN> Master File Table(MFT)</A>
<LI><A ID="tex2html1164"
  HREF="node16.html#SECTION000167300000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">7</SPAN>.<SPAN CLASS="arabic">3</SPAN> Linux-partisjoner</A>
</UL>
<BR>
<LI><A ID="tex2html1165"
  HREF="node16.html#SECTION000168000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">8</SPAN> Windows-partisjoner</A>
<LI><A ID="tex2html1166"
  HREF="node16.html#SECTION000169000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">9</SPAN> Disk controller og DMA</A>
<LI><A ID="tex2html1167"
  HREF="node16.html#SECTION0001610000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">10</SPAN> ATA/IDE, SATA og SCSI</A>
<UL>
<LI><A ID="tex2html1168"
  HREF="node16.html#SECTION0001610100000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">10</SPAN>.<SPAN CLASS="arabic">1</SPAN> ATA/IDE</A>
<LI><A ID="tex2html1169"
  HREF="node16.html#SECTION0001610200000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">10</SPAN>.<SPAN CLASS="arabic">2</SPAN> SATA</A>
<LI><A ID="tex2html1170"
  HREF="node16.html#SECTION0001610300000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">10</SPAN>.<SPAN CLASS="arabic">3</SPAN> SCSI</A>
</UL>
<BR>
<LI><A ID="tex2html1171"
  HREF="node16.html#SECTION0001611000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">11</SPAN> KiB, MiB og GiB</A>
<LI><A ID="tex2html1172"
  HREF="node16.html#SECTION0001612000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">12</SPAN> Sammenligning av overføringshastigheter på minne-enheter</A>
<UL>
<LI><A ID="tex2html1173"
  HREF="node16.html#SECTION0001612100000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">12</SPAN>.<SPAN CLASS="arabic">1</SPAN> Sammenligning av disker</A>
</UL>
<BR>
<LI><A ID="tex2html1174"
  HREF="node16.html#SECTION0001613000000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">13</SPAN> RAID</A>
<UL>
<LI><A ID="tex2html1175"
  HREF="node16.html#SECTION0001613100000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">13</SPAN>.<SPAN CLASS="arabic">1</SPAN> Ytelse</A>
<LI><A ID="tex2html1176"
  HREF="node16.html#SECTION0001613200000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">13</SPAN>.<SPAN CLASS="arabic">2</SPAN> Paritet</A>
<LI><A ID="tex2html1177"
  HREF="node16.html#SECTION0001613300000000000000"><SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">13</SPAN>.<SPAN CLASS="arabic">3</SPAN> Eksempel på paritetsberegning</A>
</UL></UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A ID="SECTION000160000000000000000">
<SPAN CLASS="arabic">15</SPAN> Forelesning 23/4-24. Disker og filsystemer</A>
</H1>

<P>
<A ID="tex2html367"
  HREF="https://www.cs.oslomet.no/~haugerud/disk.pdf">Slides  brukt i forelesningen</A>
<P>

<H2><A ID="SECTION000161000000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">1</SPAN> Forelesningsvideoer</A>
</H2>

<P>
<A ID="tex2html368"
  HREF="https://www.cs.oslomet.no/~haugerud/os/Forelesning/video/2021/os15time1.mp4">Uredigert opptak av hele første time av forelesningen ( 00:38:06)</A>
<P>
<A ID="tex2html369"
  HREF="https://www.cs.oslomet.no/~haugerud/os/Forelesning/video/2021/os15time2.mp4">Uredigert opptak av hele andre time av forelesningen ( 01:09:50)</A>
<P>

<H2><A ID="SECTION000162000000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">2</SPAN> Disker</A>
</H2>

<P>
En harddisk består av et antall plater av et magnetisk materiale. For hver plate er 
det et lese/skrive-hode som kan lese/skrive bits ved å måle magnetisering/magnetisere 
platene. De fleste disker lagrer data på begge sider av platene og har derfor lese/skrive-hode 
over og under. 

<DIV class="CENTER"><A ID="2201"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">Overflaten av en plate på innsiden av en harddisk. Lesehodet flyttet posisjon mens bildet ble tatt og kan derfor sees i to posisjoner.</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
  WIDTH="495" HEIGHT="330" STYLE=""
 SRC="./disk.png"
 ALT="Image disk"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<P>
<A ID="tex2html372"
  HREF="
https://commons.wikimedia.org/wiki/File:HardDisk1.ogv  
">Denne linken</A>
viser en video av en åpen harddisk mens den kjører.

<P>

<DIV class="CENTER"><A ID="diskSnitt"></A><A ID="2533"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">Tversnitt av en harddisk. En typsik rotasjonshastighet er 
7200 rpm (rounds per minute).</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
 WIDTH="360" HEIGHT="369" STYLE=""
 SRC="img104.png"
 ALT="\includegraphics[width=8cm]{fig/diskSnitt.eps}"> 

</DIV>

<P></TD></TR>
</TABLE>
</DIV>

<P>

<H3><A ID="SECTION000162100000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">1</SPAN> Sektor</A>
</H3>
Det området som lesehodet dekker under en rotasjon, kalles en track og en track er 
delt opp i sektorer. En sektor er

<UL>
<LI>grunnenhet for disker
</LI>
<LI>vanligvis på 512 bytes
</LI>
<LI>minste enhet som kan leses/skrives til.
</LI>
</UL>

<DIV class="CENTER"><A ID="2218"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">Hver plateoverflate er delt inn i tracks og sektorer. Den delen av en track som ligger 
innenfor en sektor, er den minste enheten det lagres data på og den er vanligvis på 512 bytes.</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
 WIDTH="357" HEIGHT="273" STYLE=""
 SRC="img105.png"
 ALT="\includegraphics[width=8cm]{osnotater/slides/OSfig/osaTrack.eps}"> 

</DIV></TD></TR>
</TABLE>
</DIV>
Noen ganger brukes begrepet sektor om alle tracks i en retning på disken. 

<H3><A ID="SECTION000162200000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">2</SPAN> Sylinder</A>
</H3>
En sylinder er samlingen av alle tracks fra alle platene i disken som ligger i 
samme avstand fra sentrum.

<DIV class="CENTER"><A ID="2225"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">En sylinder defineres som samlingen av tracks på alle overflater i samme avstand fra sentrum. 
Sylinder nummer 39 er derfor samlingen av alle track nr. 39 på begge sider av alle platene.</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
 WIDTH="359" HEIGHT="300" STYLE=""
 SRC="img106.png"
 ALT="\includegraphics[width=8cm]{osnotater/slides/OSfig/osaSylinder.eps}"> 

</DIV></TD></TR>
</TABLE>
</DIV>
Adressen til den minste lesbare enheteten, en sektor, er derfor gitt ved tre parametre [leshode, track, sektornummer]. 
Når OS vil lese noe fra disk, sendes en forespørsel med disse tre tallene. 

<P>

<H2><A ID="SECTION000163000000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">3</SPAN> Partisjoner</A>
</H2>
En disk-partisjon defineres som et antall sylindere som ligger fysisk samlet etter hverandre. For eksempel kan man bestemme at 
alle sylindere fra og med nummer 150 til og med 672 skal utgjøre en partisjon. Dette er den største enheten man deler inn 
en disk i. Under Windows er det vanlig ha en stor partisjon som utgjør hele disken, mens det under Linux er vanlig å dele 
inn disken i flere partisjoner. Monteringspunkter i filsystemet kan da tildeles bestemte partisjoner slik at for eksempel 
alt som ligger under <code>/home</code> legges på partisjon nummer 3 på disken. 

<P>

<DIV class="CENTER"><A ID="2232"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">En partisjon består av et antall sylindre som ligger etter hverandre.</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
 WIDTH="449" HEIGHT="309" STYLE=""
 SRC="img107.png"
 ALT="\includegraphics[width=10cm]{osnotater/slides/OSfig/osaPartisjon.eps}"> 

</DIV></TD></TR>
</TABLE>
</DIV>
Noen av fordelene med partisjoner er:

<UL>
<LI>Hvis man har en egen partisjon for brukeres filer og partisjonen som OS ligger på blir ødelagt eller 
OS av andre grunner må installeres på nytt, vil man kunne beholde partisjonen med brukerfiler. 
</LI>
<LI>Hvis man bare har en disk, kan man likevel ha forskjellige filsystemer og dermed forskjellige OS på 
den samme disken når den er delt i partisjoner.
</LI>
<LI>Mindre partisjoner og dermed mindre filsystemer er noe hurtigere enn å ha alt på en partisjon.
</LI>
<LI>Filsystemene på partisjoner kan tilpasses dataene som skal ligge der. For eksempel stor 
cluster-størrelse til videofilmer.
</LI>
</UL>

<P>

<H2><A ID="SECTION000164000000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">4</SPAN> SSD (Solid State Drive)</A>
</H2>

<UL>
<LI>Basert på flash-minne som i minnepinner og har ingen bevegelige deler
</LI>
<LI>Tåler rystelser bedre og er lydløs
</LI>
<LI>Rask random aksesstid, 0.1 ms mot 5-10 ms for roterende disker 
</LI>
<LI>Dyrere enn tradisjonelle disker og mindre kapasitet
</LI>
</UL>

<P>

<H2><A ID="SECTION000165000000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">5</SPAN> Filsystemer</A>
</H2>
Før en ny disk kan tas i bruk må den formatteres. Dette er en lavnivå organisering av disken som vanligvis gjøres på 
fabrikken der den deles inn i sektorer, som for de fleste harddisker er på 512 byte. 
Når dette er gjort kan disk-controlleren lese og skrive til disse sektorene. Når man senere bruker software til å 
formattere en disk, er dette en høynivå formattering som setter disken tilbake til slik den var når den var ny, og i tillegg 
gjør operasjoner som å legge inn en boot-sektor. Før operativsystemet og applikasjoner kan ta 
disken i bruk må det så lages et filsystem på disken. Det finnes mange forskjellige filsystemer, NTFS er det vanligste på 
Windows, tidligere var FAT det vanligste. På Linux er filsystemet ext3 det vanligste. 
Hvis disken er inndelt i flere partisjoner, kan det lages forskjellige filsystemer på de forskjellige partisjonene. 
Fra Windows kan man ikke uten videre lese og skrive til partisjoner med ext3, 
men fra Linux kan man lese og skrive til parisjoner med FAT og NTFS.

<P>
Filsystemet tar utganspunkt i den miste enheten som kan leses fra eller skrives til, sektoren som typisk er på 512 bytes. 
Den viktigste oppgaven til filsystemet er å fordele mapper og filer på diskens sektorer og holde orden på 
hvor alt ligger. I de fleste tilfeller er en sektor for liten til å være en optimal størrelse for inndelingen av en disk og 
filsystemet deler derfor disken inn i større blokker (Linux: blocks, Windows: clustere). Størrelsen på blokkene må bestemmes 
når filsystemet lages og fordeler og ulemper ved store/små blokker må da veies mot hverandre.

<UL>
<LI>Store blokker
	 
<UL>
<LI>Lese og skrive går hurtig, større sammenhengende områder
</LI>
<LI>En liten fil vil bruke unødvendig mye plass
</LI>
<LI>Bra til store filer, bilder og video
	
</LI>
</UL>
</LI>
<LI>Små blokker
	 
<UL>
<LI>Små filer bruker mindre diskplass
</LI>
<LI>Større filer kan risikere å bli spredt rundt på disken
</LI>
<LI>Lese og skrive store filer går da saktere
</LI>
<LI>Bra hvis filsystemet skal inneholde mange små filer
	
</LI>
</UL>
</LI>
</UL>
<H3><A ID="SECTION000165100000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">5</SPAN>.<SPAN CLASS="arabic">1</SPAN> Tabell over filenes blokker</A>
</H3>
Alle filsystemer har en oversikt over hvilke blokker enhver fil på systemet består av. Når en fil lages, 
vil den om mulig lagres på sammenhengende blokker. Når filene øker vil den dynamisk tildeles flere blokker, 
men da kan det være at det ikke er plass ved siden av de opprinnelige blokkene og filen må spres på flere 
områder av disken.

<P>

<DIV class="CENTER"><A ID="2251"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">Filsystemet holder oversikt over hvilke blokker en fil består av. Blokkstørrelsen er 2KByte i dette 
eksempelet. Bare hele blokker kan allokeres til en fil, slik at all plassen ikke utnyttes når filstørrelsen ikke eksakt går opp 
når man deler på filstørrelsen.</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
 WIDTH="542" HEIGHT="300" STYLE=""
 SRC="img108.png"
 ALT="\includegraphics[width=12cm]{fig/filesystem.pdf}"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<P>

<H3><A ID="SECTION000165200000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">5</SPAN>.<SPAN CLASS="arabic">2</SPAN> Fragmentering</A>
</H3>
 En oppdeling av filer rundt om kring på disken som resultat av dynamisk allokering når filer vokser, 
kalles fragmentering og den blir ofte ganske omfattende på 
disker som er mye i bruk og hvor det meste av plassen blir brukt. Under Windows kan man defragmentere 
disken med Disk Defragmenter. Det må da være minst 15% ledig plass og prosessen kan ta lang tid. For Linux 
ext-filsystemer finnes det ikke noen innebygd defragmenterer, men det finnes slike verktøy som kan installeres.

<DIV class="CENTER"><A ID="2258"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">Når en fil slettes vil det oppstå huller på disken og dette vil føre til enda større grad av fragmentering.</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
 WIDTH="542" HEIGHT="328" STYLE=""
 SRC="img109.png"
 ALT="\includegraphics[width=12cm]{fig/fragmentering.pdf}"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<P>

<H3><A ID="SECTION000165300000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">5</SPAN>.<SPAN CLASS="arabic">3</SPAN> Sletting av filer</A>
</H3>
Når en fil slettes, vil de fleste filsystemer bare slette informasjonen om filene og hvilke blokker som tilhører 
filene og ikke slette innholdet av blokkene. Dermed kan man med applikasjoner som autopsy eller ved å se på et 
disk-image direkte med en hex-editor finne igjen hele eller deler av en slettet fil. 
Det finnes egne applikasjoner som brukes til å slette filer bedre ved å skrive over innholdet av filene med nuller eller 
tilfeldige bit. Selvom man gjør en slik operasjon flere ganger, kan man med måleinstrumenter som er enda mer 
nøyaktige enn standard lese/skrive-hoder finne ut hva som opprinnelig var skrevet. Et eksempel på dette kan sees i
Fig. <A HREF="#figforensic">86</A>.

<DIV class="CENTER"><A ID="figforensic"></A><A ID="2266"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">Rester etter data som er overskrevet på en harddisk. </SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
  WIDTH="328" HEIGHT="328" STYLE=""
 SRC="./disk.jpg"
 ALT="Image disk"> 

</DIV>

<P></TD></TR>
</TABLE>
</DIV>

<P>
Bildet er hentet fra boken Forensic Discovery av Farmer og Venema som er tilgjengelig <A ID="tex2html379"
  HREF="https://www.porcupine.org/forensics/forensic-discovery/">online</A>.

<P>

<H2><A ID="SECTION000166000000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">6</SPAN> Lage et Linux ext3 filsystem</A>
</H2>
Først må man lage en tom fil av den størrelse man ønsker på image't. 

<P>
<SPAN CLASS="SPAN"></SPAN><TABLE><TR><TD><PRE >

haugerud@lap:~/disk/mount$ dd if=/dev/zero of=minfil bs=8M count=1
1+0 records in
1+0 records out
8388608 bytes (8,4 MB, 8,0 MiB) copied, 0,00784602 s, 1,1 GB/s
</PRE></TD></TR></TABLE><SPAN CLASS="SPAN">
</SPAN>
<P>
Dette lager en 8 MiB fil med null-tegn (ASCII tegn nummer null). Deretter kan man bygge et filsystem på denne filen:

<P>
<SPAN CLASS="SPAN"></SPAN><TABLE><TR><TD><PRE >

haugerud@lap:~/disk/mount$ mkfs -t ext3 minfil
mke2fs 1.44.1 (24-Mar-2018)
Discarding device blocks: done                            
Creating filesystem with 8192 1k blocks and 2048 inodes

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (1024 blocks): done
Writing superblocks and filesystem accounting information: done
</PRE></TD></TR></TABLE><SPAN CLASS="SPAN">
</SPAN>
<P>
Deretter kan dette image't monteres i filsystemet på helt samme måte som om det var en disk:

<P>
<SPAN CLASS="SPAN"></SPAN><TABLE><TR><TD><PRE >

haugerud@lap:~/disk/mount$ sudo mount minfil /mnt
[sudo] password for haugerud: 
haugerud@lap:~/disk/mount$ cd /mnt/
haugerud@lap:/mnt$ ls -l
total 12
drwx------ 2 root root 12288 april 27 00:10 lost+found
</PRE></TD></TR></TABLE><SPAN CLASS="SPAN">
</SPAN>
<P>
Tidligere måtte man eksplisitt bruke opsjonen -o loop for å montere en fil, men det fungerer nå uten å spesifisere det.

<P>

<H2><A ID="SECTION000167000000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">7</SPAN> NTFS</A>
</H2>
Windows NT File System er Windows NT/XP/7/8/10 sitt eget filsystem men også FAT16 og FAT32 støttes. 

<UL>
<LI>Deler inn disken i clustere
</LI>
<LI>Clusterstørrelse på 512 bytes, 1 KiB, 2 KiB, 4 KiB og opp til maks 64 KiB
</LI>
<LI>4 KiB clustere er default for disker på 2GiB eller mer
</LI>
<LI>Clusterne adresseres med 64 bits pekere 
</LI>
<LI>Komprimering
</LI>
<LI>Cluster størrelse på mer enn 4 KiB kan ikke komprimeres og brukes vanligvis ikke
</LI>
<LI>Kryptering
</LI>
<LI>Alle endringer i filsystemet logges (men ikke endringer av data)
</LI>
<LI>Raskt å rekonstruere filsystemet ved disk-crash
</LI>
</UL>

<P>

<H3><A ID="SECTION000167100000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">7</SPAN>.<SPAN CLASS="arabic">1</SPAN> Volum</A>
</H3>

<P>

<UL>
<LI>Et volum består av en eller flere clustere
</LI>
<LI>Kan omfatte deler(partisjoner) av en disk, en hel disk, eller flere disker
</LI>
<LI>Filsystemet defineres for dette volumet
</LI>
<LI>Maksimum antall clustere i et volum er <SPAN CLASS="MATH"><IMG
 STYLE="height: 1.96ex; vertical-align: -0.12ex; " SRC="img110.png"
 ALT="$2^{32}$"></SPAN>, 16TiB med 4KiB clustere 
</LI>
</UL>

<P>

<H3><A ID="SECTION000167200000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">7</SPAN>.<SPAN CLASS="arabic">2</SPAN> Master File Table(MFT)</A>
</H3>
Den viktigste filen i et NTFS-volum er MFT selv. 

<UL>
<LI>Filen MFT består av 16 records med metadata og deretter en record for hver fil og mappe
</LI>
<LI>Hver fil har en 1KB record som inneholder all informasjon om filen som attributter
</LI>
<LI>Eksempler på atributter:  tidsstempler, filnavn, data eller peker til hvor clusterene med data ligger
</LI>
<LI>Hvis plass lagres begynnelsen av dataene i MFT record'en
</LI>
<LI>Små filer kan lagres i sin helhet i MFT record'en
</LI>
<LI>Hvis det ikke er plass til pekere til alle clusterne, lages det en peker til en ny MFT-record
</LI>
<LI>Rettigheter ble tidligere lagret i hver fil-record: hvem er eier, hvem kan lese, skrive, aksessere
</LI>
<LI>Rettigheter lagres nå i en av de 16 MFT metatdatafilene, $Secure
</LI>
<LI>OS-kjernen behandler en fil som et objekt 
</LI>
</UL>

<P>

<DIV class="CENTER"><A ID="2292"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">Figure 11-41 i Tanenbaum. </SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
 WIDTH="450" HEIGHT="412" STYLE=""
 SRC="img111.png"
 ALT="\includegraphics[width=10cm]{fig/11-41.eps}"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<P>

<DIV class="CENTER"><A ID="2298"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">Figure 11-42 i Tanenbaum. </SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
 WIDTH="429" HEIGHT="252" STYLE=""
 SRC="img112.png"
 ALT="\includegraphics[width=10cm]{fig/11-42.eps}"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<P>

<H3><A ID="SECTION000167300000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">7</SPAN>.<SPAN CLASS="arabic">3</SPAN> Linux-partisjoner</A>
</H3>
Eksempelet under er informasjon som gis når man 
velger p for print fra menyen etter at man som root har kjørt kommandoen <code>fdisk /dev/hda</code> på en linux PC:
<SPAN CLASS="SPAN"></SPAN><TABLE><TR><TD><PRE >

Disk /dev/hda: 61.4 GB, 61492838400 bytes
255 heads, 63 sectors/track, 7476 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/hda1   *           1         608     4883728+  83  Linux
/dev/hda2             609         624      128520   82  Linux swap / Solaris
/dev/hda3             625        2537    15366172+  83  Linux
/dev/hda4            2538        7476    39672517+   5  Extended
/dev/hda5            2538        6500    31832766   83  Linux
/dev/hda6            6501        7476     7839688+  83  Linux
</PRE></TD></TR></TABLE><SPAN CLASS="SPAN">
</SPAN>Den første partisjonen tildeles navnet <code>/dev/hda1</code> og består av alle sylinderne fra 1 til og med 
sylinder nummer 608. Hver sylinder er på 8225280 bytes og denne partisjonen er derfor på 
<!-- MATH
 $608\times8225280$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 1.61ex; vertical-align: -0.22ex; " SRC="img113.png"
 ALT="$608\times8225280$"></SPAN> bytes <!-- MATH
 $= 5.0009\cdot10^9$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img114.png"
 ALT="$= 5.0009\cdot10^9$"></SPAN> bytes = 4.66 GBytes. Alternativt sier output at denne partisjonen består 
av 4883728 blocks med størrelse 1024 bytes. Partisjon nr. 2 er en liten swap-partisjon på 16 sylindre og totalt 126 MByte. 
Den fjerde partisjonen er spesiell. Det kan bare lages fire såkalte primære partisjoner og om man skal ha flere enn fire må 
den fjerde lages som en extended partisjon som inneholder de resterende. <code>/dev/hda4</code> inneholder ikke data, men definerer 
området på disken som utgjør partisjon 5 og 6. Linux-kommandoen <code>df</code> viser hvordan filsystemet er montert på 
partisjonene.

<P>
for SATA og SCSI-disker heter disk-devicet vanligvis <code>/dev/sda</code> og kommandoen <code>fdisk /dev/sda</code> på en linux PC kan gi:
<SPAN CLASS="SPAN"></SPAN><TABLE><TR><TD><PRE >

Disk /dev/sda: 298,1 GiB, 320072933376 bytes, 625142448 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xcb46d2fa

Device     Boot     Start       End   Sectors   Size Id Type
/dev/sda1  *         2048 591679487 591677440 282,1G 83 Linux
/dev/sda2       591681534 625141759  33460226    16G  5 Extended
/dev/sda5       591681536 625141759  33460224    16G 82 Linux swap / Solaris
</PRE></TD></TR></TABLE><SPAN CLASS="SPAN">
</SPAN>
<P>
og heads, tracks og cylinders er ikke lenger nevnt.

<P>
<SPAN CLASS="SPAN"></SPAN><TABLE><TR><TD><PRE >

[root]@rex$ df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/hda1              4806904   4223584    339136  93% /
/dev/hda3             15124900  13790960    565632  97% /lokal
/dev/hda5             31333024  22349088   7392300  76% /mysql
/dev/hda6              7716496   2785908   4538604  39% /mln
</PRE></TD></TR></TABLE><SPAN CLASS="SPAN">
</SPAN>Alt som ligger under <code>/lokal</code> i filsystemet vil fysisk ligge på partisjon nummer 3. Tilsvarende 
for partisjon 5 og 6. Resten av filsystemet, alt annent under <code>/</code> ligger på 1. partisjon. 
Neste disk vil het <code>/dev/hdb</code> og på samme måte kan denne deles inn i partisjoner og andre deler av 
filsystemet kan monters på disse partisjonene. 

<P>

<H2><A ID="SECTION000168000000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">8</SPAN> Windows-partisjoner</A>
</H2>
Om man deler opp en disk under Windows, tildeles hver partisjon bokstaver, C, D, E etc. Bokstavene A og B er 
tradisjonelt satt av for to diskett-stasjoner. Om man har flere disker kan hele denne eller deler av den om man 
lager flere partisjoner, tildels andre bokstaver. På Windows XP kan man Ved å kjøre programmet <code>Diskpart</code> se på og endre 
partisjoneringen av diskene:
<SPAN CLASS="SPAN"></SPAN><TABLE><TR><TD><PRE >

C:\&gt;Diskpart

Microsoft DiskPart version 1.0
Copyright (C) 1999-2001 Microsoft Corporation.
On computer: DIRAC

DISKPART&gt; list disk

  Disk ###  Status      Size     Free     Dyn  Gpt
  --------  ----------  -------  -------  ---  ---
  Disk 0    Online        75 GB      0 B
  Disk 1    Online        75 GB    54 GB
</PRE></TD></TR></TABLE><SPAN CLASS="SPAN">
</SPAN>Denne PC-en har to disker og ved å velge en av diskene kan man se hvilke 
partisjoner den inneholder:
<SPAN CLASS="SPAN"></SPAN><TABLE><TR><TD><PRE >

DISKPART&gt; select disk 0

Disk 0 is now the selected disk.

DISKPART&gt; detail disk

WDC WD800BB-32BSA0
Disk ID: 3E423E41
Type   : IDE
Bus    : 0
Target : 0
LUN ID : 0

  Volume ###  Ltr  Label        Fs     Type        Size     Status     Info
  ----------  ---  -----------  -----  ----------  -------  ---------  --------
  Volume 2     C                NTFS   Partition     39 GB  Healthy    System
  Volume 3     F                       Partition     35 GB  Healthy
</PRE></TD></TR></TABLE><SPAN CLASS="SPAN">
</SPAN>Vi ser at disken er delt i to omtrent like store partisjoner, at den første heter C, er systemdisken og 
har filsystemet NTFS. Den andre heter F og på denne er det ennå ikke lagd noe filsystem. 

<P>

<H2><A ID="SECTION000169000000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">9</SPAN> Disk controller og DMA</A>
</H2>
Et multitasking OS vil fortløpende ha behov for å 
lese data fra mange forskjellige steder på en disk. Siden disken snurrer rundt er det ikke opplagt hva som er den hurtigste 
måten å lese for eksempel 20 forskjellige slike forespørsler. En forespørsel består typisk av tre tall; [leshode, track, sektornummer]. 
Å flytte lesehodet til nærmeste neste track som skal leses er en 
mulighet, å la leshodet flytte seg hele veien fra innerst til ytterst og plukke opp forespøsler underveis er en annen. OS må 
velge en slik algoritme for å hente inn data. På moderne disker utføres slike algoritmer av mikroprosessoren som sitter på 
diskens egen disk controller. Tidligere tok OS seg direkte av lesingen av data og administreringen av disken, men det ordner 
nå disk controlleren. 

<P>
Før var det også vanlig at OS detaljstyrte skrivingen av data fra disken til internminnet. Dette krevet veldig mange interrupts 
hver gang det komm inn data fra disken og derfor bruker moderne systemer DMA (Direct Memory Access) som avlaster denne jobben 
for CPU-en. Dette er vanligvis en egen chip knyttet til systembussen med en egen liten mikroprosessor og tillatelse fra CPU til 
å skrive direkte til minnet. CPU kan dermed be DMA om en større eller mindre lese eller skriveoperasjoner og 
DMA vil administrere kopieringen mellom disk 
og internminnet. Først når alle dataene er på plass sender DMA et interrupt til CPU som forteller at kopieringen er 
fullført. DMA brukes også for lesning av data fra andre enheter som CD-spiller, USB-devicer etc.

<P>
Også for I/O enheter som harddisker som er svært langsomme sammenlignet med internminnet, er det nyttig å bruke 
cache. I internminnet er det satt av plass til disk-cache, slik at mest mulig av det som er lest i det siste meelomlagres og 
kan hentes ut mye hurtigere om det kommer en ny forespørsel.

<P>

<DIV class="CENTER"><A ID="2317"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">DMA kommuniserer med disk-controlleren og sørger for at det OS ønsker blir kopiert mellom 
harddisken og internminnet.</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
 WIDTH="557" HEIGHT="251" STYLE=""
 SRC="img115.png"
 ALT="\includegraphics[width=20cm]{osnotater/slides/OSfig/osaDMA.eps}"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<P>

<H2><A ID="SECTION0001610000000000000000"></A><A ID="SECATA"></A>
<BR>
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">10</SPAN> ATA/IDE, SATA og SCSI
</H2>
Det finnes flere interface-standarer eller grensesnitt-typer for harddisker. De varierer 
i pris og ytelse. ATA/IDE er billigst og brukes til standard PC'er. SATA er ATA's arvtager, 
har høyere ytelse og brukes også noe av server. 
SCSI og SAS er dyrere og brukes av servere som krever høy ytelse.

<H3><A ID="SECTION0001610100000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">10</SPAN>.<SPAN CLASS="arabic">1</SPAN> ATA/IDE</A>
</H3> 
Den tidligste versjonen av denne grensessnitt-standaren ble på slutten av åttitallet 
kjent som IDE, Integrated Drive Electronics, fordi disk-controlleren ble plassert på 
selve disken. Etterhvert ble det offisielle navnet på standarden ATA (Advanced Technology 
Attachment).

<UL>
<LI>Den billigste teknologien
</LI>
<LI>Brukes i standard desktop PC'er og laptoper
</LI>
<LI>Kalles ofte PATA (Parallell ATA) eter at SATA (Serial ATA) ble innført
</LI>
<LI>Overføringshastigheter opp til 100 MB/s
</LI>
<LI>Kan ha inntil 2 disker på samme kabel (master og slave)
</LI>
</UL>

<DIV class="CENTER"><A ID="2328"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">ATA/IDE kabel</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
  WIDTH="384" HEIGHT="288" STYLE=""
 SRC="./osaAta.png"
 ALT="Image osaAta"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<H3><A ID="SECTION0001610200000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">10</SPAN>.<SPAN CLASS="arabic">2</SPAN> SATA</A>
</H3>

<UL>
<LI>Serial ATA, raskere og bedre enn ATA, men omtrent samme pris
</LI>
<LI>Introdusert i 2003, har tatt over for ATA
</LI>
<LI>Må ha SATA-kontroller på hovedkortet eller egen SATA-kontroller
</LI>
<LI>Overføringshastigheter opp til 300 MB/S (SATA2/SATA-300)
</LI>
<LI>Bruker samme metode (8B/10B encoding) som ethernet til å sende data
</LI>
<LI>En disk per kabel
</LI>
</UL>

<P>

<DIV class="CENTER"><A ID="2337"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">SATA-kontakter på hovedkort</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
  WIDTH="384" HEIGHT="342" STYLE=""
 SRC="./osaSATA.png"
 ALT="Image osaSATA"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<P>

<DIV class="CENTER"><A ID="2343"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">SATA-kabel</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
  WIDTH="320" HEIGHT="260" STYLE=""
 SRC="./osaSATAcable.png"
 ALT="Image osaSATAcable"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<P>

<H3><A ID="SECTION0001610300000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">10</SPAN>.<SPAN CLASS="arabic">3</SPAN> SCSI</A>
</H3>

<UL>
<LI>SCSI = Small Computer Systems Interface
</LI>
<LI>Interface-standard fra 1986 for disker, CD-ROM etc.
</LI>
<LI>Mer selvstendige disker enn ATA-disker, kan ha mange disker i serie på samme kabel
</LI>
<LI>Generelt raskere, mer robuste og dyrere enn ATA
</LI>
<LI>SCSI mest brukt i servere som krever høy disk-ytelse
</LI>
<LI>Overføringshastigheter opp mot 640 MB/s (Ultra-640 SCSI)
</LI>
<LI>SAS, Serial Attached SCSI, enda hutigere, bedre og dyrere enn parallell SCSI
</LI>
<LI>SAS støtter SATA devicer
</LI>
</UL>

<P>

<DIV class="CENTER"><A ID="2352"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">SCSI-kabel</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
  WIDTH="384" HEIGHT="183" STYLE=""
 SRC="./osaSCSI.png"
 ALT="Image osaSCSI"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<P>

<H2><A ID="SECTION0001611000000000000000"></A><A ID="SECKIB"></A>
<BR>
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">11</SPAN> KiB, MiB og GiB
</H2>
Benenvninger som KB og MB er ikke alltid entydge, KB kan bety både <SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img116.png"
 ALT="$2^{10} = 1024$"></SPAN> bytes og 1000 bytes. 
Den opprinnelige SI<A ID="tex2html387"
  HREF="footnode.html#foot2357"><SUP><SPAN CLASS="arabic">6</SPAN></SUP></A>-definisjonen 
av prefiksene er den helt korrekte og sier at K = 1000, M = 1000.000, G = 1000.000.000, etc. 
Vanlig praksis når det for eksempel gjelder RAM er at 128MB 
betyr 128<!-- MATH
 $\cdot 1024^2 = 128 \cdot 1048576 = 134\cdot 10^6$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img117.png"
 ALT="$\cdot 1024^2 = 128 \cdot 1048576 = 134\cdot 10^6$"></SPAN> bytes. Men hvis en harddisk-produsent oppgir 
at en disk er på 300 GB, betyr det at den er <!-- MATH
 $300\cdot 10^9 = 279.4 \cdot 1024^3$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img118.png"
 ALT="$300\cdot 10^9 = 279.4 \cdot 1024^3$"></SPAN> bytes og et OS vil da typisk 
rapportere den som en disk med kapasitet på 279.4 GB. For å ordne opp i dette og flere lignende tilfeller av 
flertydighet definerte i 1999 International Electrotechnical Commission (IEC) nye binære prefikser 
kibi-, mebi-, gibi- og tilhørende symboler Ki, Mi, Gi. Disse prefiksene symboliserer potenser av 2 slik 
at Ki <!-- MATH
 $= 2^{10} = 1024$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img119.png"
 ALT="$= 2^{10} = 1024$"></SPAN>, Mi <SPAN CLASS="MATH"><IMG
 STYLE="height: 1.96ex; vertical-align: -0.12ex; " SRC="img120.png"
 ALT="$= 2^{20}$"></SPAN> og  Gi <SPAN CLASS="MATH"><IMG
 STYLE="height: 1.96ex; vertical-align: -0.12ex; " SRC="img121.png"
 ALT="$= 2^{30}$"></SPAN>. I 2005 ble dette en 
IEEE<A ID="tex2html388"
  HREF="footnode.html#foot2361"><SUP><SPAN CLASS="arabic">7</SPAN></SUP></A>-standard.

<P>
<TABLE class="PAD  BORDER" style="">
<TR><TH CLASS="LEFT">Navn</TH>
<TH CLASS="LEFT">Symbol</TH>
<TH CLASS="LEFT">Verdi</TH>
<TH CLASS="LEFT">Eksempel</TH>
</TR>
<TR><TD CLASS="LEFT">kilo</TD>
<TD CLASS="LEFT">K</TD>
<TD CLASS="LEFT"><SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img122.png"
 ALT="$10^3 = 1000$"></SPAN></TD>
<TD CLASS="LEFT">&nbsp;</TD>
</TR>
<TR><TD CLASS="LEFT">mega</TD>
<TD CLASS="LEFT">M</TD>
<TD CLASS="LEFT"><!-- MATH
 $10^6 = 1000.000$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img123.png"
 ALT="$10^6 = 1000.000$"></SPAN></TD>
<TD CLASS="LEFT">&nbsp;</TD>
</TR>
<TR><TD CLASS="LEFT">giga</TD>
<TD CLASS="LEFT">G</TD>
<TD CLASS="LEFT"><!-- MATH
 $10^9 = 1000.000.000$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img124.png"
 ALT="$10^9 = 1000.000.000$"></SPAN></TD>
<TD CLASS="LEFT">&nbsp;</TD>
</TR>
<TR><TD CLASS="LEFT">tera</TD>
<TD CLASS="LEFT">T</TD>
<TD CLASS="LEFT"><!-- MATH
 $10^{12} = 1000.000.000.000$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img125.png"
 ALT="$10^{12} = 1000.000.000.000$"></SPAN></TD>
<TD CLASS="LEFT">&nbsp;</TD>
</TR>
<TR><TD CLASS="LEFT">kibi</TD>
<TD CLASS="LEFT">Ki</TD>
<TD CLASS="LEFT"><SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img116.png"
 ALT="$2^{10} = 1024$"></SPAN></TD>
<TD CLASS="LEFT">100 KB = 97.6 KiB</TD>
</TR>
<TR><TD CLASS="LEFT">mebi</TD>
<TD CLASS="LEFT">Mi</TD>
<TD CLASS="LEFT"><!-- MATH
 $2^{20} = 1.048.576$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img126.png"
 ALT="$2^{20} = 1.048.576$"></SPAN></TD>
<TD CLASS="LEFT">100 MB = 95.4 MiB</TD>
</TR>
<TR><TD CLASS="LEFT">gibi</TD>
<TD CLASS="LEFT">Gi</TD>
<TD CLASS="LEFT"><!-- MATH
 $2^{30} = 1.083.741.824$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img127.png"
 ALT="$2^{30} = 1.083.741.824$"></SPAN></TD>
<TD CLASS="LEFT">100 GB = 93.1 GiB</TD>
</TR>
<TR><TD CLASS="LEFT">tebi</TD>
<TD CLASS="LEFT">Ti</TD>
<TD CLASS="LEFT"><!-- MATH
 $2^{40} = 1.099.511.627.776$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img128.png"
 ALT="$2^{40} = 1.099.511.627.776$"></SPAN></TD>
<TD CLASS="LEFT">100 TB  = 90.9 TiB</TD>
</TR>
</TABLE> 
<BR>
<BR>
<P>
Et disk-eksempel viser at produsenten Seagate bruker SI-benvening og sier at en disk er på 160 GB. På 
første figur ser man at Linux fdisk bruker samme benevning og 1 GB = 1 milliard bytes.

<DIV class="CENTER"><A ID="2374"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">fdisk viser 160 GB</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
  WIDTH="605" HEIGHT="379" STYLE=""
 SRC="./osaFdisk.png"
 ALT="Image osaFdisk"> 

</DIV></TD></TR>
</TABLE>
</DIV>
  
<BR>
Derimot viser XP's Disk Managment at disken er på 149.05 GB og bruker altså 1 GB = <SPAN CLASS="MATH"><IMG
 STYLE="height: 2.03ex; vertical-align: -0.12ex; " SRC="img129.png"
 ALT="$1024^3$"></SPAN> bytes = 1.08 milliarder bytes.

<P>

<DIV class="CENTER"><A ID="2380"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">XP viser 149.05 GB</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
  WIDTH="707" HEIGHT="397" STYLE=""
 SRC="./osaXPdisk.png"
 ALT="Image osaXPdisk"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<P>
Partisjoneringsverktøyet GParted som brukes under Ubuntu-installasjon, rapporterer disk-størrelser 
i GiB, slik at det er helt entydig hva som menes. Men fortsatt er MiB og GiB relativt sjelden i bruk.

<DIV class="CENTER"><A ID="2386"></A>
<TABLE>
<CAPTION class="BOTTOM"><STRONG>Figure:</STRONG>
<SPAN CLASS="FOOTNOTESIZE">GParted viser at en 160 GB disk er på 149.05 GiB.</SPAN></CAPTION>
<TR><TD>
<DIV class="CENTER">
<IMG
  WIDTH="707" HEIGHT="439" STYLE=""
 SRC="./osaGParted.png"
 ALT="Image osaGParted"> 

</DIV></TD></TR>
</TABLE>
</DIV>

<P>

<H2><A ID="SECTION0001612000000000000000"></A><A ID="SECSAMMENLIGNING"></A>
<BR>
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">12</SPAN> Sammenligning av overføringshastigheter på minne-enheter
</H2>
<TABLE class="PAD  BORDER" style="">
<TR><TH CLASS="LEFT">enhet</TH>
<TH CLASS="LEFT">Hastighet (MBit/s)</TH>
</TR>
<TR><TD CLASS="LEFT">Serial Infrared (SIR)</TD>
<TD CLASS="LEFT">0.115</TD>
</TR>
<TR><TD CLASS="LEFT">Bluetooth 1.1</TD>
<TD CLASS="LEFT">0.7</TD>
</TR>
<TR><TD CLASS="LEFT">Medium Infrared (MIR)</TD>
<TD CLASS="LEFT">0.5-1</TD>
</TR>
<TR><TD CLASS="LEFT">CD-ROM, 1x</TD>
<TD CLASS="LEFT">1.2</TD>
</TR>
<TR><TD CLASS="LEFT">Bluetooth 2.0</TD>
<TD CLASS="LEFT">2.1</TD>
</TR>
<TR><TD CLASS="LEFT">Fast IR</TD>
<TD CLASS="LEFT">4</TD>
</TR>
<TR><TD CLASS="LEFT">Wireless IEEE 802.11b</TD>
<TD CLASS="LEFT">5.5-11</TD>
</TR>
<TR><TD CLASS="LEFT">10 MBit Ethernet</TD>
<TD CLASS="LEFT">10</TD>
</TR>
<TR><TD CLASS="LEFT">DVD-ROM, 1x</TD>
<TD CLASS="LEFT">11.1</TD>
</TR>
<TR><TD CLASS="LEFT">USB 1.0</TD>
<TD CLASS="LEFT">12</TD>
</TR>
<TR><TD CLASS="LEFT">Bluetooth 4.0</TD>
<TD CLASS="LEFT">25</TD>
</TR>
<TR><TD CLASS="LEFT">Bluetooth 5</TD>
<TD CLASS="LEFT">50</TD>
</TR>
<TR><TD CLASS="LEFT">Wireless IEEE 802.11g</TD>
<TD CLASS="LEFT">54</TD>
</TR>
<TR><TD CLASS="LEFT">CD-ROM, 52x</TD>
<TD CLASS="LEFT">62.4</TD>
</TR>
<TR><TD CLASS="LEFT">100 MBit Ethernet</TD>
<TD CLASS="LEFT">100</TD>
</TR>
<TR><TD CLASS="LEFT">Wireless IEEE 802.11n</TD>
<TD CLASS="LEFT">150</TD>
</TR>
<TR><TD CLASS="LEFT">DVD-ROM, 16x</TD>
<TD CLASS="LEFT">177.3</TD>
</TR>
<TR><TD CLASS="LEFT">FireWire IEEE 1394 400</TD>
<TD CLASS="LEFT">400</TD>
</TR>
<TR><TD CLASS="LEFT">Blu-ray Disk 12x</TD>
<TD CLASS="LEFT">432</TD>
</TR>
<TR><TD CLASS="LEFT">USB 2.0</TD>
<TD CLASS="LEFT">480</TD>
</TR>
<TR><TD CLASS="LEFT">Wireless IEEE 802.11ac</TD>
<TD CLASS="LEFT">500</TD>
</TR>
<TR><TD CLASS="LEFT">FireWire 800</TD>
<TD CLASS="LEFT">800</TD>
</TR>
<TR><TD CLASS="LEFT">Gigabit Ethernet</TD>
<TD CLASS="LEFT">1,000</TD>
</TR>
<TR><TD CLASS="LEFT">PATA 133</TD>
<TD CLASS="LEFT">1,064</TD>
</TR>
<TR><TD CLASS="LEFT">SATA2 300</TD>
<TD CLASS="LEFT">2,400</TD>
</TR>
<TR><TD CLASS="LEFT">Ultra-320 SCSI</TD>
<TD CLASS="LEFT">2,560</TD>
</TR>
<TR><TD CLASS="LEFT">FireWire 3,200</TD>
<TD CLASS="LEFT">3,200</TD>
</TR>
<TR><TD CLASS="LEFT">SATA3</TD>
<TD CLASS="LEFT">4,800</TD>
</TR>
<TR><TD CLASS="LEFT">USB 3.0</TD>
<TD CLASS="LEFT">5,000</TD>
</TR>
<TR><TD CLASS="LEFT">Ultra-640 SCSI</TD>
<TD CLASS="LEFT">5,120</TD>
</TR>
<TR><TD CLASS="LEFT">Wireless IEEE 802.11ad</TD>
<TD CLASS="LEFT">6,750</TD>
</TR>
<TR><TD CLASS="LEFT">10 Gigabit Ethernet</TD>
<TD CLASS="LEFT">10,000</TD>
</TR>
<TR><TD CLASS="LEFT">USB 3.1</TD>
<TD CLASS="LEFT">10,000</TD>
</TR>
<TR><TD CLASS="LEFT">Thunderbolt 1</TD>
<TD CLASS="LEFT">10,000</TD>
</TR>
<TR><TD CLASS="LEFT">SAS 3</TD>
<TD CLASS="LEFT">12,000</TD>
</TR>
<TR><TD CLASS="LEFT">SATA 3.2</TD>
<TD CLASS="LEFT">16,000</TD>
</TR>
<TR><TD CLASS="LEFT">Thunderbolt 1</TD>
<TD CLASS="LEFT">20,000</TD>
</TR>
<TR><TD CLASS="LEFT">Thunderbolt 3</TD>
<TD CLASS="LEFT">40,000</TD>
</TR>
<TR><TD CLASS="LEFT">40 Gigabit Ethernet</TD>
<TD CLASS="LEFT">40,000</TD>
</TR>
<TR><TD CLASS="LEFT">100 Gigabit Ethernet</TD>
<TD CLASS="LEFT">100,000</TD>
</TR>
<TR><TD CLASS="LEFT">InfiniBand</TD>
<TD CLASS="LEFT">100,000</TD>
</TR>
</TABLE> 
<BR>
<BR>
Til sammenligning noen typiske tall for krav til overføringshastigheter for 
film i forskjellige kvaliteter:
<BR>
<BR><TABLE class="PAD  BORDER" style="">
<TR><TH CLASS="LEFT">hastighet</TH>
<TH CLASS="LEFT">kvalitet</TH>
</TR>
<TR><TD CLASS="LEFT">2-3 Mbit/s</TD>
<TD CLASS="LEFT">VHS</TD>
</TR>
<TR><TD CLASS="LEFT">8-12 Mbit/s</TD>
<TD CLASS="LEFT">DVD</TD>
</TR>
<TR><TD CLASS="LEFT">36 Mbit/s</TD>
<TD CLASS="LEFT">Blueray</TD>
</TR>
<TR><TD CLASS="LEFT">4-25 Mbit/s</TD>
<TD CLASS="LEFT">HD-TV/4K</TD>
</TR>
</TABLE> 
<BR>
I motsetning til hva som er vanlig i mange andre sammenhenger, betyr her prefikset M en million. Altså betyr 
Mbit/s ikke <SPAN CLASS="MATH"><IMG
 STYLE="height: 1.96ex; vertical-align: -0.12ex; " SRC="img130.png"
 ALT="$2^{20}$"></SPAN>bit/s =  1.048.576 bit/s. Bruken av slike prefiks er diskutert i forrige avsnitt. 

<P>

<H3><A ID="SECTION0001612100000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">12</SPAN>.<SPAN CLASS="arabic">1</SPAN> Sammenligning av disker</A>
</H3>
Her er et eksempel på hver av disktypene med priser hentet fra komplett.no. Men husk at ytelsestallene er 
hentet fra produsentene.
<BR>
<BR><TABLE class="PAD  BORDER" style="">
<TR><TH CLASS="LEFT">Type</TH>
<TH CLASS="LEFT">Kapasitet</TH>
<TH CLASS="LEFT">hastighet</TH>
<TH CLASS="LEFT">Søketid</TH>
<TH CLASS="LEFT">Rotasjon</TH>
<TH CLASS="LEFT">Buffer</TH>
<TH CLASS="LEFT">Produsent</TH>
<TH CLASS="LEFT">pris</TH>
</TR>
<TR><TD CLASS="LEFT">SATA-600</TD>
<TD CLASS="LEFT">1 TB</TD>
<TD CLASS="LEFT">600 MBps</TD>
<TD CLASS="LEFT">8.5</TD>
<TD CLASS="LEFT">7200 rpm</TD>
<TD CLASS="LEFT">64MB</TD>
<TD CLASS="LEFT">Seagate</TD>
<TD CLASS="LEFT">528</TD>
</TR>
<TR><TD CLASS="LEFT">SAS</TD>
<TD CLASS="LEFT">2 TB</TD>
<TD CLASS="LEFT">1200 MBps</TD>
<TD CLASS="LEFT">4.16</TD>
<TD CLASS="LEFT">7200 rpm</TD>
<TD CLASS="LEFT">128 MB</TD>
<TD CLASS="LEFT">Seagate</TD>
<TD CLASS="LEFT">1,675</TD>
</TR>
<TR><TD CLASS="LEFT">SSD</TD>
<TD CLASS="LEFT">120 GB</TD>
<TD CLASS="LEFT">600 MBps</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">Kingston</TD>
<TD CLASS="LEFT">578</TD>
</TR>
<TR><TD CLASS="LEFT">SSD</TD>
<TD CLASS="LEFT">240 GB</TD>
<TD CLASS="LEFT">600 MBps</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">Corsair</TD>
<TD CLASS="LEFT">1,049</TD>
</TR>
<TR><TD CLASS="LEFT">SSD</TD>
<TD CLASS="LEFT">2TB GB</TD>
<TD CLASS="LEFT">600 MBps</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">2 GB</TD>
<TD CLASS="LEFT">Samsung</TD>
<TD CLASS="LEFT">6,699</TD>
</TR>
</TABLE> 
<BR>
<BR>
<P>
I 2012 så det slik ut:
<BR>
<BR><TABLE class="PAD  BORDER" style="">
<TR><TH CLASS="LEFT">Type</TH>
<TH CLASS="LEFT">Kapasitet</TH>
<TH CLASS="LEFT">hastighet</TH>
<TH CLASS="LEFT">Søketid</TH>
<TH CLASS="LEFT">Rotasjon</TH>
<TH CLASS="LEFT">Buffer</TH>
<TH CLASS="LEFT">Produsent</TH>
<TH CLASS="LEFT">pris</TH>
</TR>
<TR><TD CLASS="LEFT">SATA-600</TD>
<TD CLASS="LEFT">1 TB</TD>
<TD CLASS="LEFT">600 MBps</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">7200 rpm</TD>
<TD CLASS="LEFT">32MB</TD>
<TD CLASS="LEFT">Seagate</TD>
<TD CLASS="LEFT">795</TD>
</TR>
<TR><TD CLASS="LEFT">SAS</TD>
<TD CLASS="LEFT">1 TB</TD>
<TD CLASS="LEFT">600 MBps</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">7200 rpm</TD>
<TD CLASS="LEFT">64 MB</TD>
<TD CLASS="LEFT">Seagate</TD>
<TD CLASS="LEFT">1.395</TD>
</TR>
<TR><TD CLASS="LEFT">SAS</TD>
<TD CLASS="LEFT">600 MB</TD>
<TD CLASS="LEFT">600 MBps</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">15000 rpm</TD>
<TD CLASS="LEFT">16 MB</TD>
<TD CLASS="LEFT">Seagate</TD>
<TD CLASS="LEFT">3.695</TD>
</TR>
<TR><TD CLASS="LEFT">SSD</TD>
<TD CLASS="LEFT">60 GB</TD>
<TD CLASS="LEFT">300 MBps</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">Corsair</TD>
<TD CLASS="LEFT">799</TD>
</TR>
<TR><TD CLASS="LEFT">SSD</TD>
<TD CLASS="LEFT">240 GB</TD>
<TD CLASS="LEFT">600 MBps</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">&nbsp;</TD>
<TD CLASS="LEFT">Corsair</TD>
<TD CLASS="LEFT">1,999</TD>
</TR>
</TABLE> 
<BR>
<BR>
<P>
Og for enda et par år tidligere så det slik ut:
<BR>
<BR><TABLE class="PAD  BORDER" style="">
<TR><TH CLASS="LEFT">Type</TH>
<TH CLASS="LEFT">Kapasitet</TH>
<TH CLASS="LEFT">hastighet</TH>
<TH CLASS="LEFT">Søketid</TH>
<TH CLASS="LEFT">Rotasjon</TH>
<TH CLASS="LEFT">Buffer</TH>
<TH CLASS="LEFT">Produsent</TH>
<TH CLASS="LEFT">pris</TH>
</TR>
<TR><TD CLASS="LEFT">ATA-133</TD>
<TD CLASS="LEFT">320 GB</TD>
<TD CLASS="LEFT">133 MBps</TD>
<TD CLASS="LEFT">8.5 ms</TD>
<TD CLASS="LEFT">7200 rpm</TD>
<TD CLASS="LEFT">8 MB</TD>
<TD CLASS="LEFT">Hitachi</TD>
<TD CLASS="LEFT">795</TD>
</TR>
<TR><TD CLASS="LEFT">SATA-300</TD>
<TD CLASS="LEFT">320 GB</TD>
<TD CLASS="LEFT">300 MBps</TD>
<TD CLASS="LEFT">8.5 ms</TD>
<TD CLASS="LEFT">7200 rpm</TD>
<TD CLASS="LEFT">16 MB</TD>
<TD CLASS="LEFT">Hitachi</TD>
<TD CLASS="LEFT">795</TD>
</TR>
<TR><TD CLASS="LEFT">Ultra320 SCSI</TD>
<TD CLASS="LEFT">300 GB</TD>
<TD CLASS="LEFT">320 MBps</TD>
<TD CLASS="LEFT">4.7 ms</TD>
<TD CLASS="LEFT">10000 rpm</TD>
<TD CLASS="LEFT">8 MB</TD>
<TD CLASS="LEFT">Seagate</TD>
<TD CLASS="LEFT">5.750</TD>
</TR>
<TR><TD CLASS="LEFT">SAS</TD>
<TD CLASS="LEFT">300 GB</TD>
<TD CLASS="LEFT">300 MBps</TD>
<TD CLASS="LEFT">3.5 ms</TD>
<TD CLASS="LEFT">15000 rpm</TD>
<TD CLASS="LEFT">16 MB</TD>
<TD CLASS="LEFT">Seagate</TD>
<TD CLASS="LEFT">8.995</TD>
</TR>
</TABLE> 
<BR>
<BR>
<P>

<H2><A ID="SECTION0001613000000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">13</SPAN> RAID</A>
</H2>
Mens utviklingen av hastigheten til prosessorer, cache og delvis RAM har gått raskt, har utviklingen  
av hastigheten til harddisker vært langsom. En måte å forbedre ytelsen på når det begynner å bli vanskelig å få hver 
enklet enhet til å gå raskere, er å bruke flere enheter i parallell. Utviklingen av multicore prosessorer er et eksempel 
på dette. For disker kalles teknologien som gjør dette RAID (Redundant Array of Independent Disks). Man bruker da flere like 
disker til å øke hastigheten man kan hente data og man kan også bruke et slikt oppsett til redundans; dobbel lagring av data 
slik at man ikke mister data om en disk blir ødelagt. 
<DL>
<DT><STRONG>RAID 0</STRONG></DT>
<DD>Minst to disker. Striper diskene. Ingen redundans. Hurtigere å lese.
</DD>
<DT><STRONG>RAID 1</STRONG></DT>
<DD>Minst to disker. Dupliserer dataene. Hurtigere å lese. Kan fortsatt lese alt om en disk ryker.
</DD>
<DT><STRONG>RAID 3</STRONG></DT>
<DD>Minst tre disker. Parallell aksess, veldig små striper, ned til en byte. Paritet lagres på en ekstra disk. Om en disk ryker kan informasjonen hentes ut fra de som er igjen. Optimalt høy overføringshastighet, men kun en forespørsel kan behandles av gangen.
</DD>
<DT><STRONG>RAID 4</STRONG></DT>
<DD>Minst tre disker. Paritet lagres på en ekstra disk. Store striper, sektor eller blocks. Om en disk ryker kan informasjonen hentes ut fra de som er igjen. Kan behandle flere forespørsler samtidig. Bra for servere som får mange forespørsler. 
</DD>
<DT><STRONG>RAID 5</STRONG></DT>
<DD>Minst tre disker. Paritet lagres fordelt på diskene. Store striper, sektor eller blocks. Om en disk ryker kan informasjonen hentes ut fra de som er igjen.
</DD>
</DL>
RAID kan implementeres i software, det vil si av OS, eller i hardware ved en dedikert RAID-controller på hovedkortet.
RAID 0, 1 og 5 er implementert i Windows 2003 server. 

<H3><A ID="SECTION0001613100000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">13</SPAN>.<SPAN CLASS="arabic">1</SPAN> Ytelse</A>
</H3>
Ved såkalt striping av diskene økes ytelsen ved både lesing og skriving av filer. Dette fordi en stor 
fil deles i striper som fordeles på diskene. Innholdet av en stor fil vil være fordelt på alle diskene og 
data kan både leses fra og skrives til diskene i parallell og da går det mye raskere. 

<H3><A ID="SECTION0001613200000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">13</SPAN>.<SPAN CLASS="arabic">2</SPAN> Paritet</A>
</H3>
Hvis man har en samling bits (for eksempel en byte, 8 bit) som har verdi en eller null, kan man 
telle antall enere. Hvis antall enere er like (0, 2, 4, <SPAN CLASS="MATH"><IMG
 STYLE="height: 0.28ex; vertical-align: -0.12ex; " SRC="img131.png"
 ALT="$\dots$"></SPAN>, har samlingen av bits like paritet. 
Hvis antall enere er odde (1, 3, 5, <SPAN CLASS="MATH"><IMG
 STYLE="height: 0.28ex; vertical-align: -0.12ex; " SRC="img131.png"
 ALT="$\dots$"></SPAN>), sier vi at samlingen av bits har odde paritet. Dette kan 
brukes til en meget enkel feilsjekking, hvis man sender et antall bit over et nettverk og pariteten har 
endret seg på veien, kan man konkludere med at minst ett bit må ha endret verdi. I et RAID kan man 
ta et bit fra hver data-disk i RAID'et, regne ut pariteten og skrive den til en egen paritetsdisk. 
Hvis en av diskene i RAID'et crasher og alle dataene for denne disken går tapt, kan man bruke dataene på 
paritetsdisken for å finne ut verdien på de tapte bit'ene. Hvis pariteten for de igjenværende 
diskene er den samme som den lagrede pariteten, har en null gått tapt.    
Hvis pariteten for de igjenværende diskene er forskjellig fra den lagrede pariteten, har en ener gått tapt. 
Dermed kan hver bit på den tapte disken gjenskapes. I RAID 3 er stripene små, ned til en byte. I RAID 4 og 5 
er stripene et antall sektorer. I begge tilfeller er prinsippet for redundans det samme. Bergningen av paritet må 
gjøres når det skrives til diskene. Det kan gjøres hurtig, fordi XOR-porter kan regne ut paritet i paralell for 
32 eller 64 bit av gangen, for henholdsvis 32 og 64 bits prosessorer. Det finnes også hardware-RAID, egne enheter 
som gjør disse paritetsberegningene og styrer RAID'et uavhengig av prosessoren.

<H3><A ID="SECTION0001613300000000000000">
<SPAN CLASS="arabic">15</SPAN>.<SPAN CLASS="arabic">13</SPAN>.<SPAN CLASS="arabic">3</SPAN> Eksempel på paritetsberegning</A>
</H3>     
Anta at vi i et RAID 3 striper disken bit for bit og bruker 5 disker. 
Disken med paritet lagrer da den samlede pariteten for bit'ene for de 4 andre 
diskene; en ener om antallet er odde og en null om antallet er like: 
<BR>
<BR><TABLE class="PAD  BORDER" style="">
<TR><TH CLASS="CENTER">disk 1</TH>
<TH CLASS="CENTER">disk 2</TH>
<TH CLASS="CENTER">disk 3</TH>
<TH CLASS="CENTER">disk4</TH>
<TH CLASS="CENTER">paritets-disk</TH>
</TR>
<TR><TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">0</TD>
</TR>
<TR><TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">1</TD>
</TR>
<TR><TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">0</TD>
</TR>
<TR><TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">0</TD>
</TR>
<TR><TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">1</TD>
</TR>
<TR><TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">0</TD>
</TR>
</TABLE> 
<BR>
<BR>
<BR>
Hvis nå for eksempel den 2. disken crasher og alle dataene fra den blir borte, vil 
RAID'et se slik ut:
 
<BR>
<BR><TABLE class="PAD  BORDER" style="">
<TR><TH CLASS="CENTER">disk 1</TH>
<TH CLASS="CENTER">disk 2</TH>
<TH CLASS="CENTER">disk 3</TH>
<TH CLASS="CENTER">disk4</TH>
<TH CLASS="CENTER">paritets-disk</TH>
</TR>
<TR><TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">&nbsp;</TD>
<TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">0</TD>
</TR>
<TR><TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">&nbsp;</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">1</TD>
</TR>
<TR><TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">&nbsp;</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">0</TD>
</TR>
<TR><TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">&nbsp;</TD>
<TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">0</TD>
</TR>
<TR><TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">&nbsp;</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">0</TD>
<TD CLASS="CENTER">1</TD>
</TR>
<TR><TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">&nbsp;</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">1</TD>
<TD CLASS="CENTER">0</TD>
</TR>
</TABLE> 
<BR>
<BR>
<BR>
<P>
Hvordan kan man nå trylle frem igjen dataene på den ødelagte disk2 og 
legge dem inn på en ny disk?
Vi ser da at dataene fra denne disken kan trylles frem igjen ved å 
bruke paritetsdisken og reglene nevnt over: Hvis pariteten for de igjenværende 
diskene er den samme som den lagrede pariteten, har en null gått tapt.    
Hvis pariteten for de igjenværende diskene er forskjellig fra den lagrede pariteten, har en ener gått tapt. 
Prøv selv!

<P>

<P>
<BR><HR>
<ADDRESS>
H&aring;rek Haugerud 2025-05-07
</ADDRESS>
</BODY>
</HTML>
