{'text': ' OK. Da skal vi se litt mer på virtualisering og prinsippene for virtualisering. Og aller først litt historie. Virtualisering regnes jo som et moderne begrep ofte. Men faktisk så drev IBM med virtualisering på sine stormaskiner allerede på 60-tallet. Så var det stort sett fysiske maskiner det gikk i, både i desktopper og ikke minst servere. Den første vitaliseringsløsningen for X86 Intella AMD, det var BMW-er i 1999. Så det er ca. 20 år siden. Det var den spede begynnelsen. Og deretter fulgte Send, som... Det er et virtualiseringssystem som dere kjører på deres Linux-VM-er. Virtual Box har dere kanskje vært borti, og KVM som vi skal se på senere i dag. Og mange andre. Microsoft har jo virtualisering, og også... Ja, VM-er er kanskje en av de aller største. Så var det et viktig punkt, og det var i 2005 som kom... Før det så var det... i praksis så var det ikke mulig å lage virkelig virtualisering. Hvor operativsystemet er helt uendret. Før det så måtte man bruke en del adhoc-metoder. For å komme rundt det at X86-hardware ikke støttet virtualisering. Vi skal se på nøyaktig hvordan virtualisering ble støttet for X86 i 2005. Det var et tidlig arbeid av påpeker Goldberg fra 1974, som så litt mer sånn i store trekk på hva som skal til for å kunne virtualisere en maskin. Man skal kunne kjøre et operativsystem på en virtuell maskin. Det de sa da, var at en maskin kan bare virtualiseres hvis alle sensitive institusjoner også er privilegerte institusjoner. Vi skal nå se litt på hva det egentlig betyr. En sensitiv institusjon er en institusjon som bare kan utføres i cornal mode. Og da tenker vi typisk på sånne... Institusjoners rom som Holt, f.eks. I use mode så kan det ikke være sånn at en hvilken som helst prosess kan skru av maskinen. Det er da en sensitiv institusjon. En privilegert institusjon er en institusjon som forårsaker en trapp til cornal mode, hvis den gjøres i use mode. Det betyr at hvis du i use mode utfører en privilegert institusjon, så vil da systemet trappe til kjernen. Da vil kjernen få et varsel. Så kommer kjernen inn. Så behandler den kallet etter det. Sånn som f.eks. skjer i et systemkall. En institusjon som er et eksempel på dette er POPF, som skrur av og på intervjus. Det er en sensitiv institusjon. Den kan bare utføres i Kölnmoll. Utføres den i husimot, så skjer det ingenting. Så da bare ignorerer maskinen det som skjer. Akkurat som med for eksempel NOP. NOP betyr no operation. Ingenting skjer hvis den institusjonen utføres. Og det skal vi se, det er et problem for virtualisering. Og det er det som ikke må skje. Påpeker Goldberg sier her at alle sensitive institusjoner De må også være privilegerte. Mens dette er da en sensitiv institusjon. Når den utføres, så skjer det ingenting. Det Goldberg påpeker, er at en sånn institusjon, når den utføres, den må trappe. Den må være privilegert. Den må trappes sånn at operativsystemet vet hva som Et eksempel på en annen sensitiv instruksjon er CLI, clear interrupt flag. Men den er også privilegert. Hvis den utføres i user mode, så gjøres en trapp til corner mode. Og dette går fint med virtualisering. Vanlige institusjoner som vi stort sett har sett på, som ADAL, CMP og Move osv., De kan kjøres i user mode uten problemer, og man kan få utført akkurat det man vil. Men det som er problemet, er at et virtuelt operativsystem kjører i user mode. Det er et spørsmål om hva X86 er. Ja, det er på en måte Assembly, men... Når jeg sier X86, så snakker jeg da om hele det institusjonssettet. X86 er det institusjonssettet som defineres av AMD og Intel. Så alle de prosessorene som de lager, som er da... De prosessorene som brukes av så å si alle servere og desktopper i verden. De bruker X86-institusjoner. Popf er en X86-institusjon. Det betyr at det er en institusjon som finnes i alle Intel- og IMDi-CPU-er. Det samme gjør Chalmé, eller Ad, Comp og Move osv. I Assembly bruker vi disse X86-institusjonene helt direkte. Men det fins også Assembly for andre institusjonssett. Arm, som er arkitekturen til mobiler, de bruker Arm Assembly. Der kan man skrive Arm Assembly. De bruker Arm Institution.', 'chunks': [{'timestamp': (0.0, 10.08), 'text': ' OK. Da skal vi se litt mer på virtualisering og prinsippene for virtualisering.'}, {'timestamp': (10.16, 18.68), 'text': ' Og aller først litt historie. Virtualisering regnes jo som et moderne begrep ofte.'}, {'timestamp': (19.8, 27.96), 'text': ' Men faktisk så drev IBM med virtualisering på sine stormaskiner allerede på 60-tallet.'}, {'timestamp': (30.0, 34.04), 'text': ' Så var det stort sett fysiske maskiner det gikk i,'}, {'timestamp': (34.2, 39.56), 'text': ' både i desktopper og ikke minst servere.'}, {'timestamp': (39.56, 46.48), 'text': ' Den første vitaliseringsløsningen for X86 Intella AMD,'}, {'timestamp': (46.64, 53.08), 'text': ' det var BMW-er i 1999. Så det er ca. 20 år siden.'}, {'timestamp': (53.36, 58.48), 'text': ' Det var den spede begynnelsen. Og deretter fulgte Send, som...'}, {'timestamp': (60.0, 64.48), 'text': ' Det er et virtualiseringssystem som dere kjører på deres Linux-VM-er.'}, {'timestamp': (64.6, 70.68), 'text': ' Virtual Box har dere kanskje vært borti, og KVM som vi skal se på senere i dag.'}, {'timestamp': (70.8, 79.2), 'text': ' Og mange andre. Microsoft har jo virtualisering, og også...'}, {'timestamp': (81.44, 85.64), 'text': ' Ja, VM-er er kanskje en av de aller største.'}, {'timestamp': (85.76, 87.96), 'text': ' Så var det et viktig punkt, og det var i 2005 som kom...'}, {'timestamp': (90.02, 100.02), 'text': ' Før det så var det... i praksis så var det ikke mulig å lage virkelig virtualisering.'}, {'timestamp': (101.22, 104.66), 'text': ' Hvor operativsystemet er helt uendret.'}, {'timestamp': (104.66, 109.06), 'text': ' Før det så måtte man bruke en del adhoc-metoder.'}, {'timestamp': (109.06, 117.18), 'text': ' For å komme rundt det at X86-hardware ikke støttet virtualisering.'}, {'timestamp': (120.0, 126.0), 'text': ' Vi skal se på nøyaktig hvordan virtualisering ble støttet for X86 i 2005.'}, {'timestamp': (132.04, 142.0), 'text': ' Det var et tidlig arbeid av påpeker Goldberg fra 1974, som så litt mer sånn'}, {'timestamp': (142.0, 148.0), 'text': ' i store trekk på hva som skal til for å kunne virtualisere en maskin.'}, {'timestamp': (150.0, 157.68), 'text': ' Man skal kunne kjøre et operativsystem på en virtuell maskin.'}, {'timestamp': (157.68, 164.4), 'text': ' Det de sa da, var at en maskin kan bare virtualiseres'}, {'timestamp': (164.9, 169.52), 'text': ' hvis alle sensitive institusjoner også er privilegerte institusjoner.'}, {'timestamp': (169.52, 175.68), 'text': ' Vi skal nå se litt på hva det egentlig betyr.'}, {'timestamp': (175.7, 175.68), 'text': ''}, {'timestamp': (182.52, 184.48), 'text': ' En sensitiv institusjon er en institusjon som bare kan utføres i cornal mode.'}, {'timestamp': (190.64, 195.88), 'text': ' Og da tenker vi typisk på sånne... Institusjoners rom som Holt, f.eks.'}, {'timestamp': (198.72, 205.64), 'text': ' I use mode så kan det ikke være sånn at en hvilken som helst prosess kan skru av maskinen.'}, {'timestamp': (205.68, 210.86), 'text': ' Det er da en sensitiv institusjon.'}, {'timestamp': (210.86, 217.62), 'text': ' En privilegert institusjon er en institusjon som forårsaker'}, {'timestamp': (217.7, 222.7), 'text': ' en trapp til cornal mode, hvis den gjøres i use mode.'}, {'timestamp': (222.78, 228.78), 'text': ' Det betyr at hvis du i use mode utfører en privilegert institusjon,'}, {'timestamp': (228.86, 235.66), 'text': ' så vil da systemet trappe til kjernen. Da vil kjernen få et varsel. Så kommer kjernen inn.'}, {'timestamp': (235.68, 245.32), 'text': ' Så behandler den kallet etter det. Sånn som f.eks. skjer i et systemkall.'}, {'timestamp': (245.4, 255.36), 'text': ' En institusjon som er et eksempel på dette er POPF, som skrur av og på intervjus.'}, {'timestamp': (255.48, 263.4), 'text': ' Det er en sensitiv institusjon. Den kan bare utføres i Kölnmoll.'}, {'timestamp': (265.68, 270.16), 'text': ' Utføres den i husimot, så skjer det ingenting.'}, {'timestamp': (270.2, 275.32), 'text': ' Så da bare ignorerer maskinen det som skjer.'}, {'timestamp': (275.4, 278.76), 'text': ' Akkurat som med for eksempel NOP. NOP betyr no operation.'}, {'timestamp': (278.76, 282.66), 'text': ' Ingenting skjer hvis den institusjonen utføres.'}, {'timestamp': (282.66, 287.18), 'text': ' Og det skal vi se, det er et problem for virtualisering.'}, {'timestamp': (287.18, 287.48), 'text': ' Og det er det som ikke må skje. Påpeker Goldberg sier her at alle sensitive institusjoner'}, {'timestamp': (295.68, 304.96), 'text': ' De må også være privilegerte. Mens dette er da en sensitiv institusjon.'}, {'timestamp': (305.0, 309.28), 'text': ' Når den utføres, så skjer det ingenting.'}, {'timestamp': (309.34, 319.24), 'text': ' Det Goldberg påpeker, er at en sånn institusjon, når den utføres, den må trappe.'}, {'timestamp': (319.36, 325.56), 'text': ' Den må være privilegert. Den må trappes sånn at operativsystemet vet hva som'}, {'timestamp': (325.68, 332.44), 'text': ' Et eksempel på en annen sensitiv instruksjon er CLI, clear interrupt flag.'}, {'timestamp': (332.52, 334.96), 'text': ' Men den er også privilegert.'}, {'timestamp': (335.04, 340.96), 'text': ' Hvis den utføres i user mode, så gjøres en trapp til corner mode.'}, {'timestamp': (341.26, 347.16), 'text': ' Og dette går fint med virtualisering.'}, {'timestamp': (348.08, 354.36), 'text': ' Vanlige institusjoner som vi stort sett har sett på, som ADAL, CMP og Move osv.,'}, {'timestamp': (355.68, 363.36), 'text': ' De kan kjøres i user mode uten problemer,'}, {'timestamp': (363.44, 366.92), 'text': ' og man kan få utført akkurat det man vil.'}, {'timestamp': (366.92, 377.4), 'text': ' Men det som er problemet, er at et virtuelt operativsystem kjører i user mode.'}, {'timestamp': (377.4, 385.48), 'text': ' Det er et spørsmål om hva X86 er. Ja, det er på en måte Assembly, men...'}, {'timestamp': (385.68, 394.36), 'text': ' Når jeg sier X86, så snakker jeg da om hele det institusjonssettet.'}, {'timestamp': (394.36, 402.16), 'text': ' X86 er det institusjonssettet som defineres av AMD og Intel.'}, {'timestamp': (402.16, 408.12), 'text': ' Så alle de prosessorene som de lager, som er da...'}, {'timestamp': (408.12, 415.36), 'text': ' De prosessorene som brukes av så å si alle servere og desktopper i verden.'}, {'timestamp': (415.68, 421.04), 'text': ' De bruker X86-institusjoner.'}, {'timestamp': (421.12, 424.8), 'text': ' Popf er en X86-institusjon.'}, {'timestamp': (424.88, 429.44), 'text': ' Det betyr at det er en institusjon som finnes i alle Intel- og IMDi-CPU-er.'}, {'timestamp': (429.52, 433.2), 'text': ' Det samme gjør Chalmé, eller Ad, Comp og Move osv.'}, {'timestamp': (433.2, 439.4), 'text': ' I Assembly bruker vi disse X86-institusjonene helt direkte.'}, {'timestamp': (439.48, 444.48), 'text': ' Men det fins også Assembly for andre institusjonssett.'}, {'timestamp': (445.7, 455.3), 'text': ' Arm, som er arkitekturen til mobiler, de bruker Arm Assembly.'}, {'timestamp': (455.38, 460.66), 'text': ' Der kan man skrive Arm Assembly. De bruker Arm Institution.'}]}