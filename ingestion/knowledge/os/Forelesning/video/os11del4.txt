{'text': ' Da skal vi se på prioritet i Java. Da skal vi se på et annet eksempel. Og prioritet i Java er... Det vi skal se, er at prioritet er litt merkelig implementert på en måte i Java. I Linux og i Windows, f.eks. Java burde være helt plattformuavhengig. Men i dette eksempelet skal vi se at det faktisk ikke er det. Men før vi diskuterer det, så kan vi se på... Skal vi se... Jeg har et Java-program som heter prio.java. Dette programmet implementerer da prioritet. Og det ligner ganske på de andre programmene vi har sett på. I dette tilfellet så startes det to tråder. Prioritredd én som jeg kaller S1, og én som jeg kaller S2. Først starter jeg tråd nummer 1, S1, og så setter jeg prioriteten til 5. Det er faktisk default-prioritet, så hvis jeg ikke hadde gjort det, så ville den likevel vært 5. Og så er det noen variabler. SN Norm Priority, jeg skriver ut den. Eller standard. Og så ser vi... Jeg skriver ut maks prioritet og min prioritet. Maks prioritet er ti, hvis jeg husker riktig, og min er én. Så dette er motsatt av nice, for nice er jo hvor snill man er med andre. Så det er ti prioritetsklasser. Ja, min er null. Vi starter på null, og så er jeg maks ti. Så... Nei... Sorry. Glem det jeg sa. Dette er bare en... Dette er ikke prioriteten. Det som jeg sender med der, er antall millisekunder som tråden skal sove før den starter. Vi ser begge starter med en gang. Men jeg setter prioriteten for tråd nummer to. Den setter jeg til ti. Så vi starter én tråd med prioritet fem og én med prioritet ti. Ti er det aller høyeste, så da burde man forvente at et eller annet skjer sånn at tråd nummer to kjører mer. Vi har jo bedt om at den skal få høyere prioritet. Vi kan se kjapt øverst hva vi gjør, og det vi gjør, ligner veldig på det vi gjorde tidligere. Vi har en telle-count og en ID, så de får ID 1 og 2. Og så i tillegg har jeg millisekunder. Det skal vi bruke på Windows etterpå, når vi skal kjøre det der. Der skal vi gi tråden noen millisekunder før den starter. Men vi gir den null millisekunder her, sånn at det er lettere å se hva som skjer i vårt tilfelle. Så vi kan jo også se hvordan vi behandler to forskjellige tråder. For de kjører i utgangspunktet samme gode, men så ser vi... Her er Rønn-metoden, som sier tråd nummer én sove først, null millisekunder, og så starter den. Men så ser vi... Her har jeg en if-test hvor jeg da tester hvis ID er lik to, så setter jeg prioritet til én. Så på den måten kan man da behandle tråder og gjøre forskjellige ting, selv om trådene i utgangspunktet er like. Så vi kan se hvordan dette ser ut når vi kompilerer og...... kjører denne tråden. Så da ser vi. Vi starter defolt prioritet til 5. Vi starter nummer 1 med prioritet 5. Og så starter nummer 2 med prioritet 5. Men vi ser de kjører annenhver gang. Det går akkurat like fort med nummer én som med nummer to. Og så går vi ned her og så setter vi prioriteten for tråd nummer to. Den setter vi til én, så da burde den ha minst prioritet. Én er da det minste, men likevel så ser vi at disse to jobber akkurat like fort. Hvis vi prøver å se på topp når de jobber, så får begge 100 % CPU. Vi har ikke noe nice eller noe sånt der. Men vi har jo også sett tidligere at hvis man har nice-prosesser, så vil det ikke være nice i forhold til... Så det vi kunne prøve å gjøre, var å starte trådene med TaskSet. Det har jeg faktisk ikke tenkt på tidligere, men vi kan gjøre et forsøk. Hvis jeg nå ser på Last Use TPU... Og så kan jeg prøve å starte Java med TaskSet. Aset minus 1,0. Sånn. Og så H... Da ser vi begge trådene kjører på tråd 0. Men vi ser at de deler helt broderlig. Selv om den ene tråden nå har... Prioritert fem. Og den andre har prioritert ti. Så tråd nummer to har prioritert ti, men dette gir ikke utslag på hvor mye CPU de får. Og vi kan ikke annet enn konkludere her med at Linux faktisk ikke bryr seg om den prioriteten. Om du setter prioritet én eller ti, spiller ingen rolle. I oppgavene denne uken så... Så blir dere bedt om å prøve å få Linux til å ta hensyn til Java-prioriteten. Og det er mulig hvis du kjører Java på en spesiell måte med et spesielt flagg. Men det virker ikke da hvis du kjører som vanlig bruker. Du må faktisk kjøre som Ruth, og i tillegg må du ha et spesielt flagg. Da implementerer JVM dette her med NICE. At man setter NICE på Java-trådene, sånn at de har prioritet i forhold til hverandre. For å se dette eksplisitt, så må du gjøre sånn som jeg gjorde nå, og bruke tasten din, sånn at de eksplisitt kjører på samme CPU. Eller har veldig mange tråder. Flere tråder enn Sepur. Ok. Da tenkte jeg å... Ja, jeg tenkte egentlig også å kjøre trådene på... Kjøre trådene på Windows. Men skal vi se... Ja, det tar litt tid å sette opp de... Så jeg lurer på om vi gjør det etter pausen, så kan vi heller se på... Nå gå til litt flere slides om tråder. Så vi skal se litt mer teoretisk på tråder. Og aller først skal vi se på blokkerende systemkall. Men før vi avslutter demoen her... Vi skal se etter pause at hvis vi gjør dette samme på... kjører helt den samme Claes-bilen, kjører det samme programmet, så vil vi se at Windows faktisk tar hensyn til prioriteten. Og den tar kraftig hensyn, sånn at hvis du har en tråd med prioritet 4, så får den mye lavere prioritet enn en tråd med prioritet 5. Mens Linux da ikke tar hensyn i det hele tatt.', 'chunks': [{'timestamp': (0.0, 6.8), 'text': ' Da skal vi se på prioritet i Java.'}, {'timestamp': (6.8, 11.8), 'text': ' Da skal vi se på et annet eksempel.'}, {'timestamp': (12.96, 18.8), 'text': ' Og prioritet i Java er...'}, {'timestamp': (18.8, 27.0), 'text': ' Det vi skal se, er at prioritet er litt merkelig implementert'}, {'timestamp': (27.08, 29.0), 'text': ' på en måte i Java.'}, {'timestamp': (30.0, 34.12), 'text': ' I Linux og i Windows, f.eks.'}, {'timestamp': (34.46, 38.0), 'text': ' Java burde være helt plattformuavhengig.'}, {'timestamp': (38.0, 43.28), 'text': ' Men i dette eksempelet skal vi se at det faktisk ikke er det.'}, {'timestamp': (43.28, 49.8), 'text': ' Men før vi diskuterer det, så kan vi se på...'}, {'timestamp': (51.36, 58.2), 'text': ' Skal vi se... Jeg har et Java-program som heter prio.java.'}, {'timestamp': (60.0, 65.12), 'text': ' Dette programmet implementerer da prioritet.'}, {'timestamp': (65.18, 71.98), 'text': ' Og det ligner ganske på de andre programmene vi har sett på.'}, {'timestamp': (74.48, 79.16), 'text': ' I dette tilfellet så startes det to tråder.'}, {'timestamp': (79.16, 87.16), 'text': ' Prioritredd én som jeg kaller S1, og én som jeg kaller S2.'}, {'timestamp': (90.0, 101.34), 'text': ' Først starter jeg tråd nummer 1, S1, og så setter jeg prioriteten til 5.'}, {'timestamp': (101.34, 107.78), 'text': ' Det er faktisk default-prioritet, så hvis jeg ikke hadde gjort det,'}, {'timestamp': (107.78, 110.36), 'text': ' så ville den likevel vært 5.'}, {'timestamp': (110.36, 117.72), 'text': ' Og så er det noen variabler. SN Norm Priority, jeg skriver ut den.'}, {'timestamp': (120.0, 123.0), 'text': ' Eller standard.'}, {'timestamp': (123.16, 128.12), 'text': ' Og så ser vi... Jeg skriver ut maks prioritet og min prioritet.'}, {'timestamp': (128.12, 133.52), 'text': ' Maks prioritet er ti, hvis jeg husker riktig, og min er én.'}, {'timestamp': (134.56, 138.6), 'text': ' Så dette er motsatt av nice, for nice er jo hvor snill man er med andre.'}, {'timestamp': (138.6, 142.12), 'text': ' Så det er ti prioritetsklasser.'}, {'timestamp': (142.12, 148.8), 'text': ' Ja, min er null. Vi starter på null, og så er jeg maks ti. Så...'}, {'timestamp': (150.0, 155.12), 'text': ' Nei... Sorry. Glem det jeg sa.'}, {'timestamp': (155.12, 158.96), 'text': ' Dette er bare en... Dette er ikke prioriteten.'}, {'timestamp': (158.96, 163.42), 'text': ' Det som jeg sender med der, er antall millisekunder'}, {'timestamp': (163.52, 167.08), 'text': ' som tråden skal sove før den starter.'}, {'timestamp': (167.08, 170.32), 'text': ' Vi ser begge starter med en gang.'}, {'timestamp': (170.34, 175.64), 'text': ' Men jeg setter prioriteten for tråd nummer to. Den setter jeg til ti.'}, {'timestamp': (175.64, 179.96), 'text': ' Så vi starter én tråd med prioritet fem og én med prioritet ti.'}, {'timestamp': (180.0, 184.2), 'text': ' Ti er det aller høyeste, så da burde man forvente'}, {'timestamp': (184.22, 190.68), 'text': ' at et eller annet skjer sånn at tråd nummer to kjører mer.'}, {'timestamp': (191.36, 194.7), 'text': ' Vi har jo bedt om at den skal få høyere prioritet.'}, {'timestamp': (194.72, 198.12), 'text': ' Vi kan se kjapt øverst hva vi gjør, og det vi gjør,'}, {'timestamp': (198.12, 202.4), 'text': ' ligner veldig på det vi gjorde tidligere.'}, {'timestamp': (202.48, 206.68), 'text': ' Vi har en telle-count og en ID, så de får ID 1 og 2.'}, {'timestamp': (206.68, 209.96), 'text': ' Og så i tillegg har jeg millisekunder.'}, {'timestamp': (210.0, 215.76), 'text': ' Det skal vi bruke på Windows etterpå, når vi skal kjøre det der.'}, {'timestamp': (215.76, 220.16), 'text': ' Der skal vi gi tråden noen millisekunder før den starter.'}, {'timestamp': (220.16, 223.32), 'text': ' Men vi gir den null millisekunder her,'}, {'timestamp': (223.4, 227.48), 'text': ' sånn at det er lettere å se hva som skjer i vårt tilfelle.'}, {'timestamp': (227.48, 234.8), 'text': ' Så vi kan jo også se hvordan vi behandler to forskjellige tråder.'}, {'timestamp': (234.8, 239.96), 'text': ' For de kjører i utgangspunktet samme gode, men så ser vi...'}, {'timestamp': (240.0, 249.32), 'text': ' Her er Rønn-metoden, som sier tråd nummer én sove først, null millisekunder,'}, {'timestamp': (249.32, 255.2), 'text': ' og så starter den. Men så ser vi... Her har jeg en if-test'}, {'timestamp': (255.2, 261.32), 'text': ' hvor jeg da tester hvis ID er lik to, så setter jeg prioritet til én.'}, {'timestamp': (261.4, 267.0), 'text': ' Så på den måten kan man da behandle tråder og gjøre forskjellige ting,'}, {'timestamp': (267.08, 269.88), 'text': ' selv om trådene i utgangspunktet er like.'}, {'timestamp': (270.0, 276.18), 'text': ' Så vi kan se hvordan dette ser ut'}, {'timestamp': (276.26, 281.18), 'text': ' når vi kompilerer og...'}, {'timestamp': (283.42, 288.9), 'text': '... kjører denne tråden. Så da ser vi.'}, {'timestamp': (288.96, 292.44), 'text': ' Vi starter defolt prioritet til 5.'}, {'timestamp': (292.48, 299.98), 'text': ' Vi starter nummer 1 med prioritet 5. Og så starter nummer 2 med prioritet 5.'}, {'timestamp': (300.0, 304.24), 'text': ' Men vi ser de kjører annenhver gang.'}, {'timestamp': (304.24, 308.56), 'text': ' Det går akkurat like fort med nummer én som med nummer to.'}, {'timestamp': (308.56, 313.96), 'text': ' Og så går vi ned her og så setter vi prioriteten for tråd nummer to.'}, {'timestamp': (314.16, 318.84), 'text': ' Den setter vi til én, så da burde den ha minst prioritet.'}, {'timestamp': (318.92, 322.68), 'text': ' Én er da det minste, men likevel så ser vi'}, {'timestamp': (322.68, 328.92), 'text': ' at disse to jobber akkurat like fort.'}, {'timestamp': (330.0, 335.84), 'text': ' Hvis vi prøver å se på topp når de jobber,'}, {'timestamp': (335.84, 343.16), 'text': ' så får begge 100 % CPU.'}, {'timestamp': (343.16, 348.64), 'text': ' Vi har ikke noe nice eller noe sånt der.'}, {'timestamp': (351.08, 357.6), 'text': ' Men vi har jo også sett tidligere at hvis man har nice-prosesser,'}, {'timestamp': (357.6, 358.6), 'text': ' så vil det ikke være nice i forhold til...'}, {'timestamp': (360.0, 368.6), 'text': ' Så det vi kunne prøve å gjøre, var å starte trådene med TaskSet.'}, {'timestamp': (368.6, 375.8), 'text': ' Det har jeg faktisk ikke tenkt på tidligere, men vi kan gjøre et forsøk.'}, {'timestamp': (376.04, 381.0), 'text': ' Hvis jeg nå ser på Last Use TPU...'}, {'timestamp': (382.2, 388.2), 'text': ' Og så kan jeg prøve å starte Java med TaskSet.'}, {'timestamp': (390.0, 393.08), 'text': ' Aset minus 1,0.'}, {'timestamp': (396.06, 402.52), 'text': ' Sånn. Og så H...'}, {'timestamp': (402.52, 408.56), 'text': ' Da ser vi begge trådene kjører på tråd 0.'}, {'timestamp': (408.56, 414.96), 'text': ' Men vi ser at de deler helt broderlig.'}, {'timestamp': (415.0, 419.0), 'text': ' Selv om den ene tråden nå har...'}, {'timestamp': (420.0, 427.6), 'text': ' Prioritert fem. Og den andre har prioritert ti.'}, {'timestamp': (427.6, 432.4), 'text': ' Så tråd nummer to har prioritert ti, men dette gir ikke utslag på'}, {'timestamp': (432.48, 437.48), 'text': ' hvor mye CPU de får. Og vi kan ikke annet enn konkludere her'}, {'timestamp': (437.56, 442.44), 'text': ' med at Linux faktisk ikke bryr seg om den prioriteten.'}, {'timestamp': (442.52, 447.4), 'text': ' Om du setter prioritet én eller ti, spiller ingen rolle.'}, {'timestamp': (450.0, 455.52), 'text': ' I oppgavene denne uken så...'}, {'timestamp': (455.52, 464.12), 'text': ' Så blir dere bedt om å prøve å få Linux til å ta hensyn til Java-prioriteten.'}, {'timestamp': (464.2, 470.44), 'text': ' Og det er mulig hvis du kjører Java på en spesiell måte med et spesielt flagg.'}, {'timestamp': (470.88, 474.96), 'text': ' Men det virker ikke da hvis du kjører som vanlig bruker.'}, {'timestamp': (474.96, 479.92), 'text': ' Du må faktisk kjøre som Ruth, og i tillegg må du ha et spesielt flagg.'}, {'timestamp': (480.0, 485.68), 'text': ' Da implementerer JVM dette her med NICE.'}, {'timestamp': (485.76, 491.92), 'text': ' At man setter NICE på Java-trådene,'}, {'timestamp': (492.0, 495.72), 'text': ' sånn at de har prioritet i forhold til hverandre.'}, {'timestamp': (495.72, 501.8), 'text': ' For å se dette eksplisitt, så må du gjøre sånn som jeg gjorde nå,'}, {'timestamp': (501.88, 506.0), 'text': ' og bruke tasten din, sånn at de eksplisitt kjører på samme CPU.'}, {'timestamp': (510.0, 516.28), 'text': ' Eller har veldig mange tråder. Flere tråder enn Sepur.'}, {'timestamp': (518.12, 521.08), 'text': ' Ok. Da tenkte jeg å...'}, {'timestamp': (523.34, 529.2), 'text': ' Ja, jeg tenkte egentlig også å kjøre trådene på...'}, {'timestamp': (531.14, 534.0), 'text': ' Kjøre trådene på Windows.'}, {'timestamp': (535.08, 538.92), 'text': ' Men skal vi se... Ja, det tar litt tid å sette opp de...'}, {'timestamp': (540.0, 544.4), 'text': ' Så jeg lurer på om vi gjør det etter pausen,'}, {'timestamp': (544.48, 548.88), 'text': ' så kan vi heller se på...'}, {'timestamp': (548.88, 553.84), 'text': ' Nå gå til litt flere slides om tråder.'}, {'timestamp': (553.96, 556.72), 'text': ' Så vi skal se litt mer teoretisk på tråder.'}, {'timestamp': (556.72, 560.8), 'text': ' Og aller først skal vi se på blokkerende systemkall.'}, {'timestamp': (561.88, 565.28), 'text': ' Men før vi avslutter demoen her...'}, {'timestamp': (565.28, 569.88), 'text': ' Vi skal se etter pause at hvis vi gjør dette samme på...'}, {'timestamp': (570.0, 575.06), 'text': ' kjører helt den samme Claes-bilen,'}, {'timestamp': (575.08, 577.68), 'text': ' kjører det samme programmet,'}, {'timestamp': (577.76, 583.12), 'text': ' så vil vi se at Windows faktisk tar hensyn til prioriteten.'}, {'timestamp': (583.24, 588.12), 'text': ' Og den tar kraftig hensyn, sånn at hvis du har en tråd med prioritet 4,'}, {'timestamp': (588.24, 594.64), 'text': ' så får den mye lavere prioritet enn en tråd med prioritet 5.'}, {'timestamp': (594.66, 598.0), 'text': ' Mens Linux da ikke tar hensyn i det hele tatt.'}]}