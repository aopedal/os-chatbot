{"lecture_id": "os11del12", "chunk_id": "os11del12_0000", "start": 0.0, "end": 207.96, "token_count": 584, "text": "Da har vi... et ja-program her som heter saldo. Det skal vi studere nå. Det gjør litt av det samme som det saldoprogrammet vi så på, gjorde. Men i vårt tilfelle så er det to saldotretts. Det er to tråder, S1 og S2. Ja, saldo av 1000. Den bare sover 1000 millisekunder. Det spiller ingen rolle i dette tilfellet. Men det som er viktig, er at vi har en public static int-saldo. En static int-saldo, så det betyr at den er felles. Og så har vi to tråder som oppdaterer denne saldoen. Og det som vi ser, skjer, er at hvis ID er lik 1, så økes saldoen med én maks antall ganger. Hvis ID er to, så minskes saldoen med én. Og da er det klart. Ja, maks er et svært tall. Det er én million. Så det er klart, hvis du øker en saldo Og så minsker den ml noen ganger med én. Så burde det ende opp med null til slutt. Men... Da skal vi se hvordan det ser ut når vi kjører den... Den jobba. Ja... Da starter to tråder. Begge med samme prioritet. Det spiller ikke så stor rolle. Men så ser vi et eller annet galt her... skjer. Den endelige, totale saldoen er 38 000. Og hvis vi prøver å kjøre på nytt, så ser vi... Da ble det 92 000. Og her... Det er 27 642. Så vi ser. Hver gang vi kjører, så... Så får vi en helt annen verdi. Her ble det minus 32 000. Dette ser jo veldig merkelig ut. Men det er akkurat den effekten vi så i eksempelet med saldo og én million som blir borte. Det er ikke noen serialisering mellom trådene. Sånn at... De vil hente inn den samme saldoverdien, og så vil de endre den. Og her ser vi at vi får en veldig stor effekt, fordi at de vil gjøre mange operasjoner. Øke saldoen med 30 000, kanskje, og så kommer den andre inn, og den har da allerede lest inn den samme verdien. Og så fortsetter de å jobbe med den. Så her blir forskjellene veldig...", "source": "lecture"}
